{"ast":null,"code":"'use strict';\n\nvar Tokenizer = require('../tokenizer'),\n  OpenElementStack = require('./open_element_stack'),\n  FormattingElementList = require('./formatting_element_list'),\n  LocationInfoParserMixin = require('../extensions/location_info/parser_mixin'),\n  defaultTreeAdapter = require('../tree_adapters/default'),\n  mergeOptions = require('../utils/merge_options'),\n  doctype = require('../common/doctype'),\n  foreignContent = require('../common/foreign_content'),\n  UNICODE = require('../common/unicode'),\n  HTML = require('../common/html');\n\n//Aliases\nvar $ = HTML.TAG_NAMES,\n  NS = HTML.NAMESPACES,\n  ATTRS = HTML.ATTRS;\nvar DEFAULT_OPTIONS = {\n  locationInfo: false,\n  treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nvar HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nvar AA_OUTER_LOOP_ITER = 8,\n  AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nvar INITIAL_MODE = 'INITIAL_MODE',\n  BEFORE_HTML_MODE = 'BEFORE_HTML_MODE',\n  BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE',\n  IN_HEAD_MODE = 'IN_HEAD_MODE',\n  AFTER_HEAD_MODE = 'AFTER_HEAD_MODE',\n  IN_BODY_MODE = 'IN_BODY_MODE',\n  TEXT_MODE = 'TEXT_MODE',\n  IN_TABLE_MODE = 'IN_TABLE_MODE',\n  IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE',\n  IN_CAPTION_MODE = 'IN_CAPTION_MODE',\n  IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE',\n  IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE',\n  IN_ROW_MODE = 'IN_ROW_MODE',\n  IN_CELL_MODE = 'IN_CELL_MODE',\n  IN_SELECT_MODE = 'IN_SELECT_MODE',\n  IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE',\n  IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE',\n  AFTER_BODY_MODE = 'AFTER_BODY_MODE',\n  IN_FRAMESET_MODE = 'IN_FRAMESET_MODE',\n  AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE',\n  AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE',\n  AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nvar INSERTION_MODE_RESET_MAP = Object.create(null);\nINSERTION_MODE_RESET_MAP[$.TR] = IN_ROW_MODE;\nINSERTION_MODE_RESET_MAP[$.TBODY] = INSERTION_MODE_RESET_MAP[$.THEAD] = INSERTION_MODE_RESET_MAP[$.TFOOT] = IN_TABLE_BODY_MODE;\nINSERTION_MODE_RESET_MAP[$.CAPTION] = IN_CAPTION_MODE;\nINSERTION_MODE_RESET_MAP[$.COLGROUP] = IN_COLUMN_GROUP_MODE;\nINSERTION_MODE_RESET_MAP[$.TABLE] = IN_TABLE_MODE;\nINSERTION_MODE_RESET_MAP[$.BODY] = IN_BODY_MODE;\nINSERTION_MODE_RESET_MAP[$.FRAMESET] = IN_FRAMESET_MODE;\n\n//Template insertion mode switch map\nvar TEMPLATE_INSERTION_MODE_SWITCH_MAP = Object.create(null);\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.CAPTION] = TEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COLGROUP] = TEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TBODY] = TEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TFOOT] = TEMPLATE_INSERTION_MODE_SWITCH_MAP[$.THEAD] = IN_TABLE_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COL] = IN_COLUMN_GROUP_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TR] = IN_TABLE_BODY_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TD] = TEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TH] = IN_ROW_MODE;\n\n//Token handlers map for insertion modes\nvar _ = Object.create(null);\n_[INITIAL_MODE] = Object.create(null);\n_[INITIAL_MODE][Tokenizer.CHARACTER_TOKEN] = _[INITIAL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInInitialMode;\n_[INITIAL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[INITIAL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[INITIAL_MODE][Tokenizer.DOCTYPE_TOKEN] = doctypeInInitialMode;\n_[INITIAL_MODE][Tokenizer.START_TAG_TOKEN] = _[INITIAL_MODE][Tokenizer.END_TAG_TOKEN] = _[INITIAL_MODE][Tokenizer.EOF_TOKEN] = tokenInInitialMode;\n_[BEFORE_HTML_MODE] = Object.create(null);\n_[BEFORE_HTML_MODE][Tokenizer.CHARACTER_TOKEN] = _[BEFORE_HTML_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[BEFORE_HTML_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[BEFORE_HTML_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[BEFORE_HTML_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHtml;\n_[BEFORE_HEAD_MODE] = Object.create(null);\n_[BEFORE_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] = _[BEFORE_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[BEFORE_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[BEFORE_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[BEFORE_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHead;\n_[IN_HEAD_MODE] = Object.create(null);\n_[IN_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInHead;\n_[IN_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagInHead;\n_[IN_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagInHead;\n_[IN_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenInHead;\n_[AFTER_HEAD_MODE] = Object.create(null);\n_[AFTER_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] = _[AFTER_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[AFTER_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[AFTER_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenAfterHead;\n_[IN_BODY_MODE] = Object.create(null);\n_[IN_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInBody;\n_[IN_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInBody;\n_[IN_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[TEXT_MODE] = Object.create(null);\n_[TEXT_MODE][Tokenizer.CHARACTER_TOKEN] = _[TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = _[TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[TEXT_MODE][Tokenizer.COMMENT_TOKEN] = _[TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] = _[TEXT_MODE][Tokenizer.START_TAG_TOKEN] = ignoreToken;\n_[TEXT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInText;\n_[TEXT_MODE][Tokenizer.EOF_TOKEN] = eofInText;\n_[IN_TABLE_MODE] = Object.create(null);\n_[IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = _[IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTable;\n_[IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTable;\n_[IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_TABLE_TEXT_MODE] = Object.create(null);\n_[IN_TABLE_TEXT_MODE][Tokenizer.CHARACTER_TOKEN] = characterInTableText;\n_[IN_TABLE_TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_TABLE_TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInTableText;\n_[IN_TABLE_TEXT_MODE][Tokenizer.COMMENT_TOKEN] = _[IN_TABLE_TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] = _[IN_TABLE_TEXT_MODE][Tokenizer.START_TAG_TOKEN] = _[IN_TABLE_TEXT_MODE][Tokenizer.END_TAG_TOKEN] = _[IN_TABLE_TEXT_MODE][Tokenizer.EOF_TOKEN] = tokenInTableText;\n_[IN_CAPTION_MODE] = Object.create(null);\n_[IN_CAPTION_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_CAPTION_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_CAPTION_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_CAPTION_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_CAPTION_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_CAPTION_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCaption;\n_[IN_CAPTION_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCaption;\n_[IN_CAPTION_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_COLUMN_GROUP_MODE] = Object.create(null);\n_[IN_COLUMN_GROUP_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_COLUMN_GROUP_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.START_TAG_TOKEN] = startTagInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.END_TAG_TOKEN] = endTagInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_TABLE_BODY_MODE] = Object.create(null);\n_[IN_TABLE_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_TABLE_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = _[IN_TABLE_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_TABLE_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TABLE_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TABLE_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTableBody;\n_[IN_TABLE_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTableBody;\n_[IN_TABLE_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_ROW_MODE] = Object.create(null);\n_[IN_ROW_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_ROW_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = _[IN_ROW_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_ROW_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_ROW_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_ROW_MODE][Tokenizer.START_TAG_TOKEN] = startTagInRow;\n_[IN_ROW_MODE][Tokenizer.END_TAG_TOKEN] = endTagInRow;\n_[IN_ROW_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_CELL_MODE] = Object.create(null);\n_[IN_CELL_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_CELL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_CELL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_CELL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_CELL_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_CELL_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCell;\n_[IN_CELL_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCell;\n_[IN_CELL_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_SELECT_MODE] = Object.create(null);\n_[IN_SELECT_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_SELECT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_SELECT_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_SELECT_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelect;\n_[IN_SELECT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelect;\n_[IN_SELECT_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_SELECT_IN_TABLE_MODE] = Object.create(null);\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelectInTable;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelectInTable;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n_[IN_TEMPLATE_MODE] = Object.create(null);\n_[IN_TEMPLATE_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_TEMPLATE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_TEMPLATE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_TEMPLATE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TEMPLATE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TEMPLATE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTemplate;\n_[IN_TEMPLATE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTemplate;\n_[IN_TEMPLATE_MODE][Tokenizer.EOF_TOKEN] = eofInTemplate;\n_[AFTER_BODY_MODE] = Object.create(null);\n_[AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = _[AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToRootHtmlElement;\n_[AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n_[IN_FRAMESET_MODE] = Object.create(null);\n_[IN_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] = _[IN_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagInFrameset;\n_[IN_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagInFrameset;\n_[IN_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n_[AFTER_FRAMESET_MODE] = Object.create(null);\n_[AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] = _[AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterFrameset;\n_[AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterFrameset;\n_[AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n_[AFTER_AFTER_BODY_MODE] = Object.create(null);\n_[AFTER_AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n_[AFTER_AFTER_FRAMESET_MODE] = Object.create(null);\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] = _[AFTER_AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterFrameset;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n//Parser\nvar Parser = module.exports = function (options) {\n  this.options = mergeOptions(DEFAULT_OPTIONS, options);\n  this.treeAdapter = this.options.treeAdapter;\n  this.pendingScript = null;\n  if (this.options.locationInfo) new LocationInfoParserMixin(this);\n};\n\n// API\nParser.prototype.parse = function (html) {\n  var document = this.treeAdapter.createDocument();\n  this._bootstrap(document, null);\n  this.tokenizer.write(html, true);\n  this._runParsingLoop(null);\n  return document;\n};\nParser.prototype.parseFragment = function (html, fragmentContext) {\n  //NOTE: use <template> element as a fragment context if context element was not provided,\n  //so we will parse in \"forgiving\" manner\n  if (!fragmentContext) fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n\n  //NOTE: create fake element which will be used as 'document' for fragment parsing.\n  //This is important for jsdom there 'document' can't be recreated, therefore\n  //fragment parsing causes messing of the main `document`.\n  var documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n  this._bootstrap(documentMock, fragmentContext);\n  if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE) this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n  this._initTokenizerForFragmentParsing();\n  this._insertFakeRootElement();\n  this._resetInsertionMode();\n  this._findFormInFragmentContext();\n  this.tokenizer.write(html, true);\n  this._runParsingLoop(null);\n  var rootElement = this.treeAdapter.getFirstChild(documentMock),\n    fragment = this.treeAdapter.createDocumentFragment();\n  this._adoptNodes(rootElement, fragment);\n  return fragment;\n};\n\n//Bootstrap parser\nParser.prototype._bootstrap = function (document, fragmentContext) {\n  this.tokenizer = new Tokenizer(this.options);\n  this.stopped = false;\n  this.insertionMode = INITIAL_MODE;\n  this.originalInsertionMode = '';\n  this.document = document;\n  this.fragmentContext = fragmentContext;\n  this.headElement = null;\n  this.formElement = null;\n  this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n  this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n  this.tmplInsertionModeStack = [];\n  this.tmplInsertionModeStackTop = -1;\n  this.currentTmplInsertionMode = null;\n  this.pendingCharacterTokens = [];\n  this.hasNonWhitespacePendingCharacterToken = false;\n  this.framesetOk = true;\n  this.skipNextNewLine = false;\n  this.fosterParentingEnabled = false;\n};\n\n//Parsing loop\nParser.prototype._runParsingLoop = function (scriptHandler) {\n  while (!this.stopped) {\n    this._setupTokenizerCDATAMode();\n    var token = this.tokenizer.getNextToken();\n    if (token.type === Tokenizer.HIBERNATION_TOKEN) break;\n    if (this.skipNextNewLine) {\n      this.skipNextNewLine = false;\n      if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n        if (token.chars.length === 1) continue;\n        token.chars = token.chars.substr(1);\n      }\n    }\n    this._processInputToken(token);\n    if (scriptHandler && this.pendingScript) break;\n  }\n};\nParser.prototype.runParsingLoopForCurrentChunk = function (writeCallback, scriptHandler) {\n  this._runParsingLoop(scriptHandler);\n  if (scriptHandler && this.pendingScript) {\n    var script = this.pendingScript;\n    this.pendingScript = null;\n    scriptHandler(script);\n    return;\n  }\n  if (writeCallback) writeCallback();\n};\n\n//Text parsing\nParser.prototype._setupTokenizerCDATAMode = function () {\n  var current = this._getAdjustedCurrentElement();\n  this.tokenizer.allowCDATA = current && current !== this.document && this.treeAdapter.getNamespaceURI(current) !== NS.HTML && !this._isIntegrationPoint(current);\n};\nParser.prototype._switchToTextParsing = function (currentToken, nextTokenizerState) {\n  this._insertElement(currentToken, NS.HTML);\n  this.tokenizer.state = nextTokenizerState;\n  this.originalInsertionMode = this.insertionMode;\n  this.insertionMode = TEXT_MODE;\n};\nParser.prototype.switchToPlaintextParsing = function () {\n  this.insertionMode = TEXT_MODE;\n  this.originalInsertionMode = IN_BODY_MODE;\n  this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n};\n\n//Fragment parsing\nParser.prototype._getAdjustedCurrentElement = function () {\n  return this.openElements.stackTop === 0 && this.fragmentContext ? this.fragmentContext : this.openElements.current;\n};\nParser.prototype._findFormInFragmentContext = function () {\n  var node = this.fragmentContext;\n  do {\n    if (this.treeAdapter.getTagName(node) === $.FORM) {\n      this.formElement = node;\n      break;\n    }\n    node = this.treeAdapter.getParentNode(node);\n  } while (node);\n};\nParser.prototype._initTokenizerForFragmentParsing = function () {\n  if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n    var tn = this.treeAdapter.getTagName(this.fragmentContext);\n    if (tn === $.TITLE || tn === $.TEXTAREA) this.tokenizer.state = Tokenizer.MODE.RCDATA;else if (tn === $.STYLE || tn === $.XMP || tn === $.IFRAME || tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) this.tokenizer.state = Tokenizer.MODE.RAWTEXT;else if (tn === $.SCRIPT) this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;else if (tn === $.PLAINTEXT) this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n  }\n};\n\n//Tree mutation\nParser.prototype._setDocumentType = function (token) {\n  this.treeAdapter.setDocumentType(this.document, token.name, token.publicId, token.systemId);\n};\nParser.prototype._attachElementToTree = function (element) {\n  if (this._shouldFosterParentOnInsertion()) this._fosterParentElement(element);else {\n    var parent = this.openElements.currentTmplContent || this.openElements.current;\n    this.treeAdapter.appendChild(parent, element);\n  }\n};\nParser.prototype._appendElement = function (token, namespaceURI) {\n  var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n  this._attachElementToTree(element);\n};\nParser.prototype._insertElement = function (token, namespaceURI) {\n  var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n  this._attachElementToTree(element);\n  this.openElements.push(element);\n};\nParser.prototype._insertFakeElement = function (tagName) {\n  var element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n  this._attachElementToTree(element);\n  this.openElements.push(element);\n};\nParser.prototype._insertTemplate = function (token) {\n  var tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs),\n    content = this.treeAdapter.createDocumentFragment();\n  this.treeAdapter.setTemplateContent(tmpl, content);\n  this._attachElementToTree(tmpl);\n  this.openElements.push(tmpl);\n};\nParser.prototype._insertFakeRootElement = function () {\n  var element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n  this.treeAdapter.appendChild(this.openElements.current, element);\n  this.openElements.push(element);\n};\nParser.prototype._appendCommentNode = function (token, parent) {\n  var commentNode = this.treeAdapter.createCommentNode(token.data);\n  this.treeAdapter.appendChild(parent, commentNode);\n};\nParser.prototype._insertCharacters = function (token) {\n  if (this._shouldFosterParentOnInsertion()) this._fosterParentText(token.chars);else {\n    var parent = this.openElements.currentTmplContent || this.openElements.current;\n    this.treeAdapter.insertText(parent, token.chars);\n  }\n};\nParser.prototype._adoptNodes = function (donor, recipient) {\n  while (true) {\n    var child = this.treeAdapter.getFirstChild(donor);\n    if (!child) break;\n    this.treeAdapter.detachNode(child);\n    this.treeAdapter.appendChild(recipient, child);\n  }\n};\n\n//Token processing\nParser.prototype._shouldProcessTokenInForeignContent = function (token) {\n  var current = this._getAdjustedCurrentElement();\n  if (!current || current === this.document) return false;\n  var ns = this.treeAdapter.getNamespaceURI(current);\n  if (ns === NS.HTML) return false;\n  if (this.treeAdapter.getTagName(current) === $.ANNOTATION_XML && ns === NS.MATHML && token.type === Tokenizer.START_TAG_TOKEN && token.tagName === $.SVG) return false;\n  var isCharacterToken = token.type === Tokenizer.CHARACTER_TOKEN || token.type === Tokenizer.NULL_CHARACTER_TOKEN || token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN,\n    isMathMLTextStartTag = token.type === Tokenizer.START_TAG_TOKEN && token.tagName !== $.MGLYPH && token.tagName !== $.MALIGNMARK;\n  if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML)) return false;\n  if ((token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) && this._isIntegrationPoint(current, NS.HTML)) return false;\n  return token.type !== Tokenizer.EOF_TOKEN;\n};\nParser.prototype._processToken = function (token) {\n  _[this.insertionMode][token.type](this, token);\n};\nParser.prototype._processTokenInBodyMode = function (token) {\n  _[IN_BODY_MODE][token.type](this, token);\n};\nParser.prototype._processTokenInForeignContent = function (token) {\n  if (token.type === Tokenizer.CHARACTER_TOKEN) characterInForeignContent(this, token);else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN) nullCharacterInForeignContent(this, token);else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN) insertCharacters(this, token);else if (token.type === Tokenizer.COMMENT_TOKEN) appendComment(this, token);else if (token.type === Tokenizer.START_TAG_TOKEN) startTagInForeignContent(this, token);else if (token.type === Tokenizer.END_TAG_TOKEN) endTagInForeignContent(this, token);\n};\nParser.prototype._processInputToken = function (token) {\n  if (this._shouldProcessTokenInForeignContent(token)) this._processTokenInForeignContent(token);else this._processToken(token);\n};\n\n//Integration points\nParser.prototype._isIntegrationPoint = function (element, foreignNS) {\n  var tn = this.treeAdapter.getTagName(element),\n    ns = this.treeAdapter.getNamespaceURI(element),\n    attrs = this.treeAdapter.getAttrList(element);\n  return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n};\n\n//Active formatting elements reconstruction\nParser.prototype._reconstructActiveFormattingElements = function () {\n  var listLength = this.activeFormattingElements.length;\n  if (listLength) {\n    var unopenIdx = listLength,\n      entry = null;\n    do {\n      unopenIdx--;\n      entry = this.activeFormattingElements.entries[unopenIdx];\n      if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n        unopenIdx++;\n        break;\n      }\n    } while (unopenIdx > 0);\n    for (var i = unopenIdx; i < listLength; i++) {\n      entry = this.activeFormattingElements.entries[i];\n      this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n      entry.element = this.openElements.current;\n    }\n  }\n};\n\n//Close elements\nParser.prototype._closeTableCell = function () {\n  this.openElements.generateImpliedEndTags();\n  this.openElements.popUntilTableCellPopped();\n  this.activeFormattingElements.clearToLastMarker();\n  this.insertionMode = IN_ROW_MODE;\n};\nParser.prototype._closePElement = function () {\n  this.openElements.generateImpliedEndTagsWithExclusion($.P);\n  this.openElements.popUntilTagNamePopped($.P);\n};\n\n//Insertion modes\nParser.prototype._resetInsertionMode = function () {\n  for (var i = this.openElements.stackTop, last = false; i >= 0; i--) {\n    var element = this.openElements.items[i];\n    if (i === 0) {\n      last = true;\n      if (this.fragmentContext) element = this.fragmentContext;\n    }\n    var tn = this.treeAdapter.getTagName(element),\n      newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n    if (newInsertionMode) {\n      this.insertionMode = newInsertionMode;\n      break;\n    } else if (!last && (tn === $.TD || tn === $.TH)) {\n      this.insertionMode = IN_CELL_MODE;\n      break;\n    } else if (!last && tn === $.HEAD) {\n      this.insertionMode = IN_HEAD_MODE;\n      break;\n    } else if (tn === $.SELECT) {\n      this._resetInsertionModeForSelect(i);\n      break;\n    } else if (tn === $.TEMPLATE) {\n      this.insertionMode = this.currentTmplInsertionMode;\n      break;\n    } else if (tn === $.HTML) {\n      this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n      break;\n    } else if (last) {\n      this.insertionMode = IN_BODY_MODE;\n      break;\n    }\n  }\n};\nParser.prototype._resetInsertionModeForSelect = function (selectIdx) {\n  if (selectIdx > 0) {\n    for (var i = selectIdx - 1; i > 0; i--) {\n      var ancestor = this.openElements.items[i],\n        tn = this.treeAdapter.getTagName(ancestor);\n      if (tn === $.TEMPLATE) break;else if (tn === $.TABLE) {\n        this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n        return;\n      }\n    }\n  }\n  this.insertionMode = IN_SELECT_MODE;\n};\nParser.prototype._pushTmplInsertionMode = function (mode) {\n  this.tmplInsertionModeStack.push(mode);\n  this.tmplInsertionModeStackTop++;\n  this.currentTmplInsertionMode = mode;\n};\nParser.prototype._popTmplInsertionMode = function () {\n  this.tmplInsertionModeStack.pop();\n  this.tmplInsertionModeStackTop--;\n  this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n};\n\n//Foster parenting\nParser.prototype._isElementCausesFosterParenting = function (element) {\n  var tn = this.treeAdapter.getTagName(element);\n  return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n};\nParser.prototype._shouldFosterParentOnInsertion = function () {\n  return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n};\nParser.prototype._findFosterParentingLocation = function () {\n  var location = {\n    parent: null,\n    beforeElement: null\n  };\n  for (var i = this.openElements.stackTop; i >= 0; i--) {\n    var openElement = this.openElements.items[i],\n      tn = this.treeAdapter.getTagName(openElement),\n      ns = this.treeAdapter.getNamespaceURI(openElement);\n    if (tn === $.TEMPLATE && ns === NS.HTML) {\n      location.parent = this.treeAdapter.getTemplateContent(openElement);\n      break;\n    } else if (tn === $.TABLE) {\n      location.parent = this.treeAdapter.getParentNode(openElement);\n      if (location.parent) location.beforeElement = openElement;else location.parent = this.openElements.items[i - 1];\n      break;\n    }\n  }\n  if (!location.parent) location.parent = this.openElements.items[0];\n  return location;\n};\nParser.prototype._fosterParentElement = function (element) {\n  var location = this._findFosterParentingLocation();\n  if (location.beforeElement) this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);else this.treeAdapter.appendChild(location.parent, element);\n};\nParser.prototype._fosterParentText = function (chars) {\n  var location = this._findFosterParentingLocation();\n  if (location.beforeElement) this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);else this.treeAdapter.insertText(location.parent, chars);\n};\n\n//Special elements\nParser.prototype._isSpecialElement = function (element) {\n  var tn = this.treeAdapter.getTagName(element),\n    ns = this.treeAdapter.getNamespaceURI(element);\n  return HTML.SPECIAL_ELEMENTS[ns][tn];\n};\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n  var formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n  if (formattingElementEntry) {\n    if (!p.openElements.contains(formattingElementEntry.element)) {\n      p.activeFormattingElements.removeEntry(formattingElementEntry);\n      formattingElementEntry = null;\n    } else if (!p.openElements.hasInScope(token.tagName)) formattingElementEntry = null;\n  } else genericEndTagInBody(p, token);\n  return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n  var furthestBlock = null;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i];\n    if (element === formattingElementEntry.element) break;\n    if (p._isSpecialElement(element)) furthestBlock = element;\n  }\n  if (!furthestBlock) {\n    p.openElements.popUntilElementPopped(formattingElementEntry.element);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n  }\n  return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n  var lastElement = furthestBlock,\n    nextElement = p.openElements.getCommonAncestor(furthestBlock);\n  for (var i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n    //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n    nextElement = p.openElements.getCommonAncestor(element);\n    var elementEntry = p.activeFormattingElements.getElementEntry(element),\n      counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER,\n      shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n    if (shouldRemoveFromOpenElements) {\n      if (counterOverflow) p.activeFormattingElements.removeEntry(elementEntry);\n      p.openElements.remove(element);\n    } else {\n      element = aaRecreateElementFromEntry(p, elementEntry);\n      if (lastElement === furthestBlock) p.activeFormattingElements.bookmark = elementEntry;\n      p.treeAdapter.detachNode(lastElement);\n      p.treeAdapter.appendChild(element, lastElement);\n      lastElement = element;\n    }\n  }\n  return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(elementEntry.element),\n    newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n  p.openElements.replace(elementEntry.element, newElement);\n  elementEntry.element = newElement;\n  return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n  if (p._isElementCausesFosterParenting(commonAncestor)) p._fosterParentElement(lastElement);else {\n    var tn = p.treeAdapter.getTagName(commonAncestor),\n      ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n    if (tn === $.TEMPLATE && ns === NS.HTML) commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n    p.treeAdapter.appendChild(commonAncestor, lastElement);\n  }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n  var ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element),\n    token = formattingElementEntry.token,\n    newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n  p._adoptNodes(furthestBlock, newElement);\n  p.treeAdapter.appendChild(furthestBlock, newElement);\n  p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n  p.activeFormattingElements.removeEntry(formattingElementEntry);\n  p.openElements.remove(formattingElementEntry.element);\n  p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n  var formattingElementEntry;\n  for (var i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n    formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n    if (!formattingElementEntry) break;\n    var furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n    if (!furthestBlock) break;\n    p.activeFormattingElements.bookmark = formattingElementEntry;\n    var lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element),\n      commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n    p.treeAdapter.detachNode(lastElement);\n    aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n    aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n  }\n}\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n  //NOTE: do nothing =)\n}\nfunction appendComment(p, token) {\n  p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\nfunction appendCommentToRootHtmlElement(p, token) {\n  p._appendCommentNode(token, p.openElements.items[0]);\n}\nfunction appendCommentToDocument(p, token) {\n  p._appendCommentNode(token, p.document);\n}\nfunction insertCharacters(p, token) {\n  p._insertCharacters(token);\n}\nfunction stopParsing(p) {\n  p.stopped = true;\n}\n\n//12.2.5.4.1 The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n  p._setDocumentType(token);\n  var mode = token.forceQuirks ? HTML.DOCUMENT_MODE.QUIRKS : doctype.getDocumentMode(token.name, token.publicId, token.systemId);\n  p.treeAdapter.setDocumentMode(p.document, mode);\n  p.insertionMode = BEFORE_HTML_MODE;\n}\nfunction tokenInInitialMode(p, token) {\n  p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n  p.insertionMode = BEFORE_HTML_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.2 The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n  if (token.tagName === $.HTML) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = BEFORE_HEAD_MODE;\n  } else tokenBeforeHtml(p, token);\n}\nfunction endTagBeforeHtml(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR) tokenBeforeHtml(p, token);\n}\nfunction tokenBeforeHtml(p, token) {\n  p._insertFakeRootElement();\n  p.insertionMode = BEFORE_HEAD_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.3 The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.HEAD) {\n    p._insertElement(token, NS.HTML);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n  } else tokenBeforeHead(p, token);\n}\nfunction endTagBeforeHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR) tokenBeforeHead(p, token);\n}\nfunction tokenBeforeHead(p, token) {\n  p._insertFakeElement($.HEAD);\n  p.headElement = p.openElements.current;\n  p.insertionMode = IN_HEAD_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.4 The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META) p._appendElement(token, NS.HTML);else if (tn === $.TITLE) p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n\n  //NOTE: here we assume that we always act as an interactive user agent with enabled scripting, so we parse\n  //<noscript> as a rawtext.\n  else if (tn === $.NOSCRIPT || tn === $.NOFRAMES || tn === $.STYLE) p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);else if (tn === $.SCRIPT) p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);else if (tn === $.TEMPLATE) {\n    p._insertTemplate(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n    p.insertionMode = IN_TEMPLATE_MODE;\n    p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n  } else if (tn !== $.HEAD) tokenInHead(p, token);\n}\nfunction endTagInHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HEAD) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n  } else if (tn === $.BODY || tn === $.BR || tn === $.HTML) tokenInHead(p, token);else if (tn === $.TEMPLATE && p.openElements.tmplCount > 0) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped($.TEMPLATE);\n    p.activeFormattingElements.clearToLastMarker();\n    p._popTmplInsertionMode();\n    p._resetInsertionMode();\n  }\n}\nfunction tokenInHead(p, token) {\n  p.openElements.pop();\n  p.insertionMode = AFTER_HEAD_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.6 The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.BODY) {\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_BODY_MODE;\n  } else if (tn === $.FRAMESET) {\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  } else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n    p.openElements.push(p.headElement);\n    startTagInHead(p, token);\n    p.openElements.remove(p.headElement);\n  } else if (tn !== $.HEAD) tokenAfterHead(p, token);\n}\nfunction endTagAfterHead(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BODY || tn === $.HTML || tn === $.BR) tokenAfterHead(p, token);else if (tn === $.TEMPLATE) endTagInHead(p, token);\n}\nfunction tokenAfterHead(p, token) {\n  p._insertFakeElement($.BODY);\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.7 The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n}\nfunction characterInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction htmlStartTagInBody(p, token) {\n  if (p.openElements.tmplCount === 0) p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n}\nfunction bodyStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (bodyElement && p.openElements.tmplCount === 0) {\n    p.framesetOk = false;\n    p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n  }\n}\nfunction framesetStartTagInBody(p, token) {\n  var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n  if (p.framesetOk && bodyElement) {\n    p.treeAdapter.detachNode(bodyElement);\n    p.openElements.popAllUpToHtmlElement();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_FRAMESET_MODE;\n  }\n}\nfunction addressStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._insertElement(token, NS.HTML);\n}\nfunction numberedHeaderStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  var tn = p.openElements.currentTagName;\n  if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) p.openElements.pop();\n  p._insertElement(token, NS.HTML);\n}\nfunction preStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.framesetOk = false;\n}\nfunction formStartTagInBody(p, token) {\n  var inTemplate = p.openElements.tmplCount > 0;\n  if (!p.formElement || inTemplate) {\n    if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n    p._insertElement(token, NS.HTML);\n    if (!inTemplate) p.formElement = p.openElements.current;\n  }\n}\nfunction listItemStartTagInBody(p, token) {\n  p.framesetOk = false;\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i >= 0; i--) {\n    var element = p.openElements.items[i],\n      elementTn = p.treeAdapter.getTagName(element),\n      closeTn = null;\n    if (tn === $.LI && elementTn === $.LI) closeTn = $.LI;else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT)) closeTn = elementTn;\n    if (closeTn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n      p.openElements.popUntilTagNamePopped(closeTn);\n      break;\n    }\n    if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element)) break;\n  }\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._insertElement(token, NS.HTML);\n}\nfunction plaintextStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._insertElement(token, NS.HTML);\n  p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\nfunction buttonStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BUTTON)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped($.BUTTON);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n}\nfunction aStartTagInBody(p, token) {\n  var activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n  if (activeElementEntry) {\n    callAdoptionAgency(p, token);\n    p.openElements.remove(activeElementEntry.element);\n    p.activeFormattingElements.removeEntry(activeElementEntry);\n  }\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction bStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction nobrStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  if (p.openElements.hasInScope($.NOBR)) {\n    callAdoptionAgency(p, token);\n    p._reconstructActiveFormattingElements();\n  }\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\nfunction appletStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.activeFormattingElements.insertMarker();\n  p.framesetOk = false;\n}\nfunction tableStartTagInBody(p, token) {\n  if (p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS && p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  p.insertionMode = IN_TABLE_MODE;\n}\nfunction areaStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n}\nfunction inputStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._appendElement(token, NS.HTML);\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE) p.framesetOk = false;\n}\nfunction paramStartTagInBody(p, token) {\n  p._appendElement(token, NS.HTML);\n}\nfunction hrStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  if (p.openElements.currentTagName === $.MENUITEM) p.openElements.pop();\n  p._appendElement(token, NS.HTML);\n  p.framesetOk = false;\n}\nfunction imageStartTagInBody(p, token) {\n  token.tagName = $.IMG;\n  areaStartTagInBody(p, token);\n}\nfunction textareaStartTagInBody(p, token) {\n  p._insertElement(token, NS.HTML);\n  //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n  //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n  p.skipNextNewLine = true;\n  p.tokenizer.state = Tokenizer.MODE.RCDATA;\n  p.originalInsertionMode = p.insertionMode;\n  p.framesetOk = false;\n  p.insertionMode = TEXT_MODE;\n}\nfunction xmpStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  p._reconstructActiveFormattingElements();\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction iframeStartTagInBody(p, token) {\n  p.framesetOk = false;\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n  p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\nfunction selectStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n  p.framesetOk = false;\n  if (p.insertionMode === IN_TABLE_MODE || p.insertionMode === IN_CAPTION_MODE || p.insertionMode === IN_TABLE_BODY_MODE || p.insertionMode === IN_ROW_MODE || p.insertionMode === IN_CELL_MODE) p.insertionMode = IN_SELECT_IN_TABLE_MODE;else p.insertionMode = IN_SELECT_MODE;\n}\nfunction optgroupStartTagInBody(p, token) {\n  if (p.openElements.currentTagName === $.OPTION) p.openElements.pop();\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\nfunction rbStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) p.openElements.generateImpliedEndTags();\n  p._insertElement(token, NS.HTML);\n}\nfunction rtStartTagInBody(p, token) {\n  if (p.openElements.hasInScope($.RUBY)) p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n  p._insertElement(token, NS.HTML);\n}\nfunction menuitemStartTagInBody(p, token) {\n  if (p.openElements.currentTagName === $.MENUITEM) p.openElements.pop();\n\n  // TODO needs clarification, see https://github.com/whatwg/html/pull/907/files#r73505877\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\nfunction menuStartTagInBody(p, token) {\n  if (p.openElements.hasInButtonScope($.P)) p._closePElement();\n  if (p.openElements.currentTagName === $.MENUITEM) p.openElements.pop();\n  p._insertElement(token, NS.HTML);\n}\nfunction mathStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenMathMLAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) p._appendElement(token, NS.MATHML);else p._insertElement(token, NS.MATHML);\n}\nfunction svgStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  foreignContent.adjustTokenSVGAttrs(token);\n  foreignContent.adjustTokenXMLAttrs(token);\n  if (token.selfClosing) p._appendElement(token, NS.SVG);else p._insertElement(token, NS.SVG);\n}\nfunction genericStartTagInBody(p, token) {\n  p._reconstructActiveFormattingElements();\n  p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.I || tn === $.S || tn === $.B || tn === $.U) bStartTagInBody(p, token);else if (tn === $.P) addressStartTagInBody(p, token);else if (tn === $.A) aStartTagInBody(p, token);else genericStartTagInBody(p, token);\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.OL || tn === $.UL) addressStartTagInBody(p, token);else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) numberedHeaderStartTagInBody(p, token);else if (tn === $.LI || tn === $.DD || tn === $.DT) listItemStartTagInBody(p, token);else if (tn === $.EM || tn === $.TT) bStartTagInBody(p, token);else if (tn === $.BR) areaStartTagInBody(p, token);else if (tn === $.HR) hrStartTagInBody(p, token);else if (tn === $.RB) rbStartTagInBody(p, token);else if (tn === $.RT || tn === $.RP) rtStartTagInBody(p, token);else if (tn !== $.TH && tn !== $.TD && tn !== $.TR) genericStartTagInBody(p, token);\n      break;\n    case 3:\n      if (tn === $.DIV || tn === $.DIR || tn === $.NAV) addressStartTagInBody(p, token);else if (tn === $.PRE) preStartTagInBody(p, token);else if (tn === $.BIG) bStartTagInBody(p, token);else if (tn === $.IMG || tn === $.WBR) areaStartTagInBody(p, token);else if (tn === $.XMP) xmpStartTagInBody(p, token);else if (tn === $.SVG) svgStartTagInBody(p, token);else if (tn === $.RTC) rbStartTagInBody(p, token);else if (tn !== $.COL) genericStartTagInBody(p, token);\n      break;\n    case 4:\n      if (tn === $.HTML) htmlStartTagInBody(p, token);else if (tn === $.BASE || tn === $.LINK || tn === $.META) startTagInHead(p, token);else if (tn === $.BODY) bodyStartTagInBody(p, token);else if (tn === $.MAIN) addressStartTagInBody(p, token);else if (tn === $.FORM) formStartTagInBody(p, token);else if (tn === $.CODE || tn === $.FONT) bStartTagInBody(p, token);else if (tn === $.NOBR) nobrStartTagInBody(p, token);else if (tn === $.AREA) areaStartTagInBody(p, token);else if (tn === $.MATH) mathStartTagInBody(p, token);else if (tn === $.MENU) menuStartTagInBody(p, token);else if (tn !== $.HEAD) genericStartTagInBody(p, token);\n      break;\n    case 5:\n      if (tn === $.STYLE || tn === $.TITLE) startTagInHead(p, token);else if (tn === $.ASIDE) addressStartTagInBody(p, token);else if (tn === $.SMALL) bStartTagInBody(p, token);else if (tn === $.TABLE) tableStartTagInBody(p, token);else if (tn === $.EMBED) areaStartTagInBody(p, token);else if (tn === $.INPUT) inputStartTagInBody(p, token);else if (tn === $.PARAM || tn === $.TRACK) paramStartTagInBody(p, token);else if (tn === $.IMAGE) imageStartTagInBody(p, token);else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD) genericStartTagInBody(p, token);\n      break;\n    case 6:\n      if (tn === $.SCRIPT) startTagInHead(p, token);else if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP) addressStartTagInBody(p, token);else if (tn === $.BUTTON) buttonStartTagInBody(p, token);else if (tn === $.STRIKE || tn === $.STRONG) bStartTagInBody(p, token);else if (tn === $.APPLET || tn === $.OBJECT) appletStartTagInBody(p, token);else if (tn === $.KEYGEN) areaStartTagInBody(p, token);else if (tn === $.SOURCE) paramStartTagInBody(p, token);else if (tn === $.IFRAME) iframeStartTagInBody(p, token);else if (tn === $.SELECT) selectStartTagInBody(p, token);else if (tn === $.OPTION) optgroupStartTagInBody(p, token);else genericStartTagInBody(p, token);\n      break;\n    case 7:\n      if (tn === $.BGSOUND) startTagInHead(p, token);else if (tn === $.DETAILS || tn === $.ADDRESS || tn === $.ARTICLE || tn === $.SECTION || tn === $.SUMMARY) addressStartTagInBody(p, token);else if (tn === $.LISTING) preStartTagInBody(p, token);else if (tn === $.MARQUEE) appletStartTagInBody(p, token);else if (tn === $.NOEMBED) noembedStartTagInBody(p, token);else if (tn !== $.CAPTION) genericStartTagInBody(p, token);\n      break;\n    case 8:\n      if (tn === $.BASEFONT) startTagInHead(p, token);else if (tn === $.MENUITEM) menuitemStartTagInBody(p, token);else if (tn === $.FRAMESET) framesetStartTagInBody(p, token);else if (tn === $.FIELDSET) addressStartTagInBody(p, token);else if (tn === $.TEXTAREA) textareaStartTagInBody(p, token);else if (tn === $.TEMPLATE) startTagInHead(p, token);else if (tn === $.NOSCRIPT) noembedStartTagInBody(p, token);else if (tn === $.OPTGROUP) optgroupStartTagInBody(p, token);else if (tn !== $.COLGROUP) genericStartTagInBody(p, token);\n      break;\n    case 9:\n      if (tn === $.PLAINTEXT) plaintextStartTagInBody(p, token);else genericStartTagInBody(p, token);\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) addressStartTagInBody(p, token);else genericStartTagInBody(p, token);\n      break;\n    default:\n      genericStartTagInBody(p, token);\n  }\n}\nfunction bodyEndTagInBody(p) {\n  if (p.openElements.hasInScope($.BODY)) p.insertionMode = AFTER_BODY_MODE;\n}\nfunction htmlEndTagInBody(p, token) {\n  if (p.openElements.hasInScope($.BODY)) {\n    p.insertionMode = AFTER_BODY_MODE;\n    p._processToken(token);\n  }\n}\nfunction addressEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction formEndTagInBody(p) {\n  var inTemplate = p.openElements.tmplCount > 0,\n    formElement = p.formElement;\n  if (!inTemplate) p.formElement = null;\n  if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n    p.openElements.generateImpliedEndTags();\n    if (inTemplate) p.openElements.popUntilTagNamePopped($.FORM);else p.openElements.remove(formElement);\n  }\n}\nfunction pEndTagInBody(p) {\n  if (!p.openElements.hasInButtonScope($.P)) p._insertFakeElement($.P);\n  p._closePElement();\n}\nfunction liEndTagInBody(p) {\n  if (p.openElements.hasInListItemScope($.LI)) {\n    p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n    p.openElements.popUntilTagNamePopped($.LI);\n  }\n}\nfunction ddEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTagsWithExclusion(tn);\n    p.openElements.popUntilTagNamePopped(tn);\n  }\n}\nfunction numberedHeaderEndTagInBody(p) {\n  if (p.openElements.hasNumberedHeaderInScope()) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilNumberedHeaderPopped();\n  }\n}\nfunction appletEndTagInBody(p, token) {\n  var tn = token.tagName;\n  if (p.openElements.hasInScope(tn)) {\n    p.openElements.generateImpliedEndTags();\n    p.openElements.popUntilTagNamePopped(tn);\n    p.activeFormattingElements.clearToLastMarker();\n  }\n}\nfunction brEndTagInBody(p) {\n  p._reconstructActiveFormattingElements();\n  p._insertFakeElement($.BR);\n  p.openElements.pop();\n  p.framesetOk = false;\n}\nfunction genericEndTagInBody(p, token) {\n  var tn = token.tagName;\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getTagName(element) === tn) {\n      p.openElements.generateImpliedEndTagsWithExclusion(tn);\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n    if (p._isSpecialElement(element)) break;\n  }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 1:\n      if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U) callAdoptionAgency(p, token);else if (tn === $.P) pEndTagInBody(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 2:\n      if (tn === $.DL || tn === $.UL || tn === $.OL) addressEndTagInBody(p, token);else if (tn === $.LI) liEndTagInBody(p, token);else if (tn === $.DD || tn === $.DT) ddEndTagInBody(p, token);else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6) numberedHeaderEndTagInBody(p, token);else if (tn === $.BR) brEndTagInBody(p, token);else if (tn === $.EM || tn === $.TT) callAdoptionAgency(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 3:\n      if (tn === $.BIG) callAdoptionAgency(p, token);else if (tn === $.DIR || tn === $.DIV || tn === $.NAV) addressEndTagInBody(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 4:\n      if (tn === $.BODY) bodyEndTagInBody(p, token);else if (tn === $.HTML) htmlEndTagInBody(p, token);else if (tn === $.FORM) formEndTagInBody(p, token);else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR) callAdoptionAgency(p, token);else if (tn === $.MAIN || tn === $.MENU) addressEndTagInBody(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 5:\n      if (tn === $.ASIDE) addressEndTagInBody(p, token);else if (tn === $.SMALL) callAdoptionAgency(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 6:\n      if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP) addressEndTagInBody(p, token);else if (tn === $.APPLET || tn === $.OBJECT) appletEndTagInBody(p, token);else if (tn === $.STRIKE || tn === $.STRONG) callAdoptionAgency(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 7:\n      if (tn === $.ADDRESS || tn === $.ARTICLE || tn === $.DETAILS || tn === $.SECTION || tn === $.SUMMARY) addressEndTagInBody(p, token);else if (tn === $.MARQUEE) appletEndTagInBody(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 8:\n      if (tn === $.FIELDSET) addressEndTagInBody(p, token);else if (tn === $.TEMPLATE) endTagInHead(p, token);else genericEndTagInBody(p, token);\n      break;\n    case 10:\n      if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION) addressEndTagInBody(p, token);else genericEndTagInBody(p, token);\n      break;\n    default:\n      genericEndTagInBody(p, token);\n  }\n}\nfunction eofInBody(p, token) {\n  if (p.tmplInsertionModeStackTop > -1) eofInTemplate(p, token);else p.stopped = true;\n}\n\n//12.2.5.4.8 The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n  if (token.tagName === $.SCRIPT) p.pendingScript = p.openElements.current;\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n}\nfunction eofInText(p, token) {\n  p.openElements.pop();\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n//12.2.5.4.9 The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n  var curTn = p.openElements.currentTagName;\n  if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n    p.pendingCharacterTokens = [];\n    p.hasNonWhitespacePendingCharacterToken = false;\n    p.originalInsertionMode = p.insertionMode;\n    p.insertionMode = IN_TABLE_TEXT_MODE;\n    p._processToken(token);\n  } else tokenInTable(p, token);\n}\nfunction captionStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p.activeFormattingElements.insertMarker();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_CAPTION_MODE;\n}\nfunction colgroupStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\nfunction colStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.COLGROUP);\n  p.insertionMode = IN_COLUMN_GROUP_MODE;\n  p._processToken(token);\n}\nfunction tbodyStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertElement(token, NS.HTML);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n}\nfunction tdStartTagInTable(p, token) {\n  p.openElements.clearBackToTableContext();\n  p._insertFakeElement($.TBODY);\n  p.insertionMode = IN_TABLE_BODY_MODE;\n  p._processToken(token);\n}\nfunction tableStartTagInTable(p, token) {\n  if (p.openElements.hasInTableScope($.TABLE)) {\n    p.openElements.popUntilTagNamePopped($.TABLE);\n    p._resetInsertionMode();\n    p._processToken(token);\n  }\n}\nfunction inputStartTagInTable(p, token) {\n  var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n  if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE) p._appendElement(token, NS.HTML);else tokenInTable(p, token);\n}\nfunction formStartTagInTable(p, token) {\n  if (!p.formElement && p.openElements.tmplCount === 0) {\n    p._insertElement(token, NS.HTML);\n    p.formElement = p.openElements.current;\n    p.openElements.pop();\n  }\n}\nfunction startTagInTable(p, token) {\n  var tn = token.tagName;\n  switch (tn.length) {\n    case 2:\n      if (tn === $.TD || tn === $.TH || tn === $.TR) tdStartTagInTable(p, token);else tokenInTable(p, token);\n      break;\n    case 3:\n      if (tn === $.COL) colStartTagInTable(p, token);else tokenInTable(p, token);\n      break;\n    case 4:\n      if (tn === $.FORM) formStartTagInTable(p, token);else tokenInTable(p, token);\n      break;\n    case 5:\n      if (tn === $.TABLE) tableStartTagInTable(p, token);else if (tn === $.STYLE) startTagInHead(p, token);else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) tbodyStartTagInTable(p, token);else if (tn === $.INPUT) inputStartTagInTable(p, token);else tokenInTable(p, token);\n      break;\n    case 6:\n      if (tn === $.SCRIPT) startTagInHead(p, token);else tokenInTable(p, token);\n      break;\n    case 7:\n      if (tn === $.CAPTION) captionStartTagInTable(p, token);else tokenInTable(p, token);\n      break;\n    case 8:\n      if (tn === $.COLGROUP) colgroupStartTagInTable(p, token);else if (tn === $.TEMPLATE) startTagInHead(p, token);else tokenInTable(p, token);\n      break;\n    default:\n      tokenInTable(p, token);\n  }\n}\nfunction endTagInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n      p.openElements.popUntilTagNamePopped($.TABLE);\n      p._resetInsertionMode();\n    }\n  } else if (tn === $.TEMPLATE) endTagInHead(p, token);else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) tokenInTable(p, token);\n}\nfunction tokenInTable(p, token) {\n  var savedFosterParentingState = p.fosterParentingEnabled;\n  p.fosterParentingEnabled = true;\n  p._processTokenInBodyMode(token);\n  p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n//12.2.5.4.10 The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n}\nfunction characterInTableText(p, token) {\n  p.pendingCharacterTokens.push(token);\n  p.hasNonWhitespacePendingCharacterToken = true;\n}\nfunction tokenInTableText(p, token) {\n  var i = 0;\n  if (p.hasNonWhitespacePendingCharacterToken) {\n    for (; i < p.pendingCharacterTokens.length; i++) tokenInTable(p, p.pendingCharacterTokens[i]);\n  } else {\n    for (; i < p.pendingCharacterTokens.length; i++) p._insertCharacters(p.pendingCharacterTokens[i]);\n  }\n  p.insertionMode = p.originalInsertionMode;\n  p._processToken(token);\n}\n\n//12.2.5.4.11 The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else startTagInBody(p, token);\n}\nfunction endTagInCaption(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.CAPTION)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped($.CAPTION);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_TABLE_MODE;\n      if (tn === $.TABLE) p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR) endTagInBody(p, token);\n}\n\n//12.2.5.4.12 The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.COL) p._appendElement(token, NS.HTML);else if (tn === $.TEMPLATE) startTagInHead(p, token);else tokenInColumnGroup(p, token);\n}\nfunction endTagInColumnGroup(p, token) {\n  var tn = token.tagName;\n  if (tn === $.COLGROUP) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TEMPLATE) endTagInHead(p, token);else if (tn !== $.COL) tokenInColumnGroup(p, token);\n}\nfunction tokenInColumnGroup(p, token) {\n  if (p.openElements.currentTagName === $.COLGROUP) {\n    p.openElements.pop();\n    p.insertionMode = IN_TABLE_MODE;\n    p._processToken(token);\n  }\n}\n\n//12.2.5.4.13 The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_ROW_MODE;\n  } else if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableBodyContext();\n    p._insertFakeElement($.TR);\n    p.insertionMode = IN_ROW_MODE;\n    p._processToken(token);\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else startTagInTable(p, token);\n}\nfunction endTagInTableBody(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasTableBodyContextInTableScope()) {\n      p.openElements.clearBackToTableBodyContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR) endTagInTable(p, token);\n}\n\n//12.2.5.4.14 The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TH || tn === $.TD) {\n    p.openElements.clearBackToTableRowContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CELL_MODE;\n    p.activeFormattingElements.insertMarker();\n  } else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else startTagInTable(p, token);\n}\nfunction endTagInRow(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n    }\n  } else if (tn === $.TABLE) {\n    if (p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n    if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n      p.openElements.clearBackToTableRowContext();\n      p.openElements.pop();\n      p.insertionMode = IN_TABLE_BODY_MODE;\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP || tn !== $.HTML && tn !== $.TD && tn !== $.TH) endTagInTable(p, token);\n}\n\n//12.2.5.4.15 The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY || tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else startTagInBody(p, token);\n}\nfunction endTagInCell(p, token) {\n  var tn = token.tagName;\n  if (tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.generateImpliedEndTags();\n      p.openElements.popUntilTagNamePopped(tn);\n      p.activeFormattingElements.clearToLastMarker();\n      p.insertionMode = IN_ROW_MODE;\n    }\n  } else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p._closeTableCell();\n      p._processToken(token);\n    }\n  } else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML) endTagInBody(p, token);\n}\n\n//12.2.5.4.16 The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) p.openElements.pop();\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.OPTGROUP) {\n    if (p.openElements.currentTagName === $.OPTION) p.openElements.pop();\n    if (p.openElements.currentTagName === $.OPTGROUP) p.openElements.pop();\n    p._insertElement(token, NS.HTML);\n  } else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n    if (p.openElements.hasInSelectScope($.SELECT)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      if (tn !== $.SELECT) p._processToken(token);\n    }\n  } else if (tn === $.SCRIPT || tn === $.TEMPLATE) startTagInHead(p, token);\n}\nfunction endTagInSelect(p, token) {\n  var tn = token.tagName;\n  if (tn === $.OPTGROUP) {\n    var prevOpenElement = p.openElements.items[p.openElements.stackTop - 1],\n      prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n    if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP) p.openElements.pop();\n    if (p.openElements.currentTagName === $.OPTGROUP) p.openElements.pop();\n  } else if (tn === $.OPTION) {\n    if (p.openElements.currentTagName === $.OPTION) p.openElements.pop();\n  } else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n  } else if (tn === $.TEMPLATE) endTagInHead(p, token);\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    p.openElements.popUntilTagNamePopped($.SELECT);\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else startTagInSelect(p, token);\n}\nfunction endTagInSelectInTable(p, token) {\n  var tn = token.tagName;\n  if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n    if (p.openElements.hasInTableScope(tn)) {\n      p.openElements.popUntilTagNamePopped($.SELECT);\n      p._resetInsertionMode();\n      p._processToken(token);\n    }\n  } else endTagInSelect(p, token);\n}\n\n//12.2.5.4.18 The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n  var tn = token.tagName;\n  if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META || tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) startTagInHead(p, token);else {\n    var newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n    p._popTmplInsertionMode();\n    p._pushTmplInsertionMode(newInsertionMode);\n    p.insertionMode = newInsertionMode;\n    p._processToken(token);\n  }\n}\nfunction endTagInTemplate(p, token) {\n  if (token.tagName === $.TEMPLATE) endTagInHead(p, token);\n}\nfunction eofInTemplate(p, token) {\n  if (p.openElements.tmplCount > 0) {\n    p.openElements.popUntilTagNamePopped($.TEMPLATE);\n    p.activeFormattingElements.clearToLastMarker();\n    p._popTmplInsertionMode();\n    p._resetInsertionMode();\n    p._processToken(token);\n  } else p.stopped = true;\n}\n\n//12.2.5.4.19 The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) startTagInBody(p, token);else tokenAfterBody(p, token);\n}\nfunction endTagAfterBody(p, token) {\n  if (token.tagName === $.HTML) {\n    if (!p.fragmentContext) p.insertionMode = AFTER_AFTER_BODY_MODE;\n  } else tokenAfterBody(p, token);\n}\nfunction tokenAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.20 The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.FRAMESET) p._insertElement(token, NS.HTML);else if (tn === $.FRAME) p._appendElement(token, NS.HTML);else if (tn === $.NOFRAMES) startTagInHead(p, token);\n}\nfunction endTagInFrameset(p, token) {\n  if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n    p.openElements.pop();\n    if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET) p.insertionMode = AFTER_FRAMESET_MODE;\n  }\n}\n\n//12.2.5.4.21 The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.NOFRAMES) startTagInHead(p, token);\n}\nfunction endTagAfterFrameset(p, token) {\n  if (token.tagName === $.HTML) p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n}\n\n//12.2.5.4.22 The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n  if (token.tagName === $.HTML) startTagInBody(p, token);else tokenAfterAfterBody(p, token);\n}\nfunction tokenAfterAfterBody(p, token) {\n  p.insertionMode = IN_BODY_MODE;\n  p._processToken(token);\n}\n\n//12.2.5.4.23 The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n  var tn = token.tagName;\n  if (tn === $.HTML) startTagInBody(p, token);else if (tn === $.NOFRAMES) startTagInHead(p, token);\n}\n\n//12.2.5.5 The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n  token.chars = UNICODE.REPLACEMENT_CHARACTER;\n  p._insertCharacters(token);\n}\nfunction characterInForeignContent(p, token) {\n  p._insertCharacters(token);\n  p.framesetOk = false;\n}\nfunction startTagInForeignContent(p, token) {\n  if (foreignContent.causesExit(token) && !p.fragmentContext) {\n    while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML && !p._isIntegrationPoint(p.openElements.current)) p.openElements.pop();\n    p._processToken(token);\n  } else {\n    var current = p._getAdjustedCurrentElement(),\n      currentNs = p.treeAdapter.getNamespaceURI(current);\n    if (currentNs === NS.MATHML) foreignContent.adjustTokenMathMLAttrs(token);else if (currentNs === NS.SVG) {\n      foreignContent.adjustTokenSVGTagName(token);\n      foreignContent.adjustTokenSVGAttrs(token);\n    }\n    foreignContent.adjustTokenXMLAttrs(token);\n    if (token.selfClosing) p._appendElement(token, currentNs);else p._insertElement(token, currentNs);\n  }\n}\nfunction endTagInForeignContent(p, token) {\n  for (var i = p.openElements.stackTop; i > 0; i--) {\n    var element = p.openElements.items[i];\n    if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n      p._processToken(token);\n      break;\n    }\n    if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n      p.openElements.popUntilElementPopped(element);\n      break;\n    }\n  }\n}","map":{"version":3,"names":["Tokenizer","require","OpenElementStack","FormattingElementList","LocationInfoParserMixin","defaultTreeAdapter","mergeOptions","doctype","foreignContent","UNICODE","HTML","$","TAG_NAMES","NS","NAMESPACES","ATTRS","DEFAULT_OPTIONS","locationInfo","treeAdapter","HIDDEN_INPUT_TYPE","AA_OUTER_LOOP_ITER","AA_INNER_LOOP_ITER","INITIAL_MODE","BEFORE_HTML_MODE","BEFORE_HEAD_MODE","IN_HEAD_MODE","AFTER_HEAD_MODE","IN_BODY_MODE","TEXT_MODE","IN_TABLE_MODE","IN_TABLE_TEXT_MODE","IN_CAPTION_MODE","IN_COLUMN_GROUP_MODE","IN_TABLE_BODY_MODE","IN_ROW_MODE","IN_CELL_MODE","IN_SELECT_MODE","IN_SELECT_IN_TABLE_MODE","IN_TEMPLATE_MODE","AFTER_BODY_MODE","IN_FRAMESET_MODE","AFTER_FRAMESET_MODE","AFTER_AFTER_BODY_MODE","AFTER_AFTER_FRAMESET_MODE","INSERTION_MODE_RESET_MAP","Object","create","TR","TBODY","THEAD","TFOOT","CAPTION","COLGROUP","TABLE","BODY","FRAMESET","TEMPLATE_INSERTION_MODE_SWITCH_MAP","COL","TD","TH","_","CHARACTER_TOKEN","NULL_CHARACTER_TOKEN","tokenInInitialMode","WHITESPACE_CHARACTER_TOKEN","ignoreToken","COMMENT_TOKEN","appendComment","DOCTYPE_TOKEN","doctypeInInitialMode","START_TAG_TOKEN","END_TAG_TOKEN","EOF_TOKEN","tokenBeforeHtml","startTagBeforeHtml","endTagBeforeHtml","tokenBeforeHead","startTagBeforeHead","endTagBeforeHead","tokenInHead","insertCharacters","startTagInHead","endTagInHead","tokenAfterHead","startTagAfterHead","endTagAfterHead","characterInBody","whitespaceCharacterInBody","startTagInBody","endTagInBody","eofInBody","endTagInText","eofInText","characterInTable","startTagInTable","endTagInTable","characterInTableText","whitespaceCharacterInTableText","tokenInTableText","startTagInCaption","endTagInCaption","tokenInColumnGroup","startTagInColumnGroup","endTagInColumnGroup","startTagInTableBody","endTagInTableBody","startTagInRow","endTagInRow","startTagInCell","endTagInCell","startTagInSelect","endTagInSelect","startTagInSelectInTable","endTagInSelectInTable","startTagInTemplate","endTagInTemplate","eofInTemplate","tokenAfterBody","appendCommentToRootHtmlElement","startTagAfterBody","endTagAfterBody","stopParsing","startTagInFrameset","endTagInFrameset","startTagAfterFrameset","endTagAfterFrameset","tokenAfterAfterBody","appendCommentToDocument","startTagAfterAfterBody","startTagAfterAfterFrameset","Parser","module","exports","options","pendingScript","prototype","parse","html","document","createDocument","_bootstrap","tokenizer","write","_runParsingLoop","parseFragment","fragmentContext","createElement","TEMPLATE","documentMock","getTagName","_pushTmplInsertionMode","_initTokenizerForFragmentParsing","_insertFakeRootElement","_resetInsertionMode","_findFormInFragmentContext","rootElement","getFirstChild","fragment","createDocumentFragment","_adoptNodes","stopped","insertionMode","originalInsertionMode","headElement","formElement","openElements","activeFormattingElements","tmplInsertionModeStack","tmplInsertionModeStackTop","currentTmplInsertionMode","pendingCharacterTokens","hasNonWhitespacePendingCharacterToken","framesetOk","skipNextNewLine","fosterParentingEnabled","scriptHandler","_setupTokenizerCDATAMode","token","getNextToken","type","HIBERNATION_TOKEN","chars","length","substr","_processInputToken","runParsingLoopForCurrentChunk","writeCallback","script","current","_getAdjustedCurrentElement","allowCDATA","getNamespaceURI","_isIntegrationPoint","_switchToTextParsing","currentToken","nextTokenizerState","_insertElement","state","switchToPlaintextParsing","MODE","PLAINTEXT","stackTop","node","FORM","getParentNode","tn","TITLE","TEXTAREA","RCDATA","STYLE","XMP","IFRAME","NOEMBED","NOFRAMES","NOSCRIPT","RAWTEXT","SCRIPT","SCRIPT_DATA","_setDocumentType","setDocumentType","name","publicId","systemId","_attachElementToTree","element","_shouldFosterParentOnInsertion","_fosterParentElement","parent","currentTmplContent","appendChild","_appendElement","namespaceURI","tagName","attrs","push","_insertFakeElement","_insertTemplate","tmpl","content","setTemplateContent","_appendCommentNode","commentNode","createCommentNode","data","_insertCharacters","_fosterParentText","insertText","donor","recipient","child","detachNode","_shouldProcessTokenInForeignContent","ns","ANNOTATION_XML","MATHML","SVG","isCharacterToken","isMathMLTextStartTag","MGLYPH","MALIGNMARK","_processToken","_processTokenInBodyMode","_processTokenInForeignContent","characterInForeignContent","nullCharacterInForeignContent","startTagInForeignContent","endTagInForeignContent","foreignNS","getAttrList","isIntegrationPoint","_reconstructActiveFormattingElements","listLength","unopenIdx","entry","entries","MARKER_ENTRY","contains","i","_closeTableCell","generateImpliedEndTags","popUntilTableCellPopped","clearToLastMarker","_closePElement","generateImpliedEndTagsWithExclusion","P","popUntilTagNamePopped","last","items","newInsertionMode","HEAD","SELECT","_resetInsertionModeForSelect","selectIdx","ancestor","mode","_popTmplInsertionMode","pop","_isElementCausesFosterParenting","_findFosterParentingLocation","location","beforeElement","openElement","getTemplateContent","insertBefore","insertTextBefore","_isSpecialElement","SPECIAL_ELEMENTS","aaObtainFormattingElementEntry","p","formattingElementEntry","getElementEntryInScopeWithTagName","removeEntry","hasInScope","genericEndTagInBody","aaObtainFurthestBlock","furthestBlock","popUntilElementPopped","aaInnerLoop","formattingElement","lastElement","nextElement","getCommonAncestor","elementEntry","getElementEntry","counterOverflow","shouldRemoveFromOpenElements","remove","aaRecreateElementFromEntry","bookmark","newElement","replace","aaInsertLastNodeInCommonAncestor","commonAncestor","aaReplaceFormattingElement","insertElementAfterBookmark","insertAfter","callAdoptionAgency","forceQuirks","DOCUMENT_MODE","QUIRKS","getDocumentMode","setDocumentMode","BR","BASE","BASEFONT","BGSOUND","LINK","META","insertMarker","tmplCount","htmlStartTagInBody","adoptAttributes","bodyStartTagInBody","bodyElement","tryPeekProperlyNestedBodyElement","framesetStartTagInBody","popAllUpToHtmlElement","addressStartTagInBody","hasInButtonScope","numberedHeaderStartTagInBody","currentTagName","H1","H2","H3","H4","H5","H6","preStartTagInBody","formStartTagInBody","inTemplate","listItemStartTagInBody","elementTn","closeTn","LI","DD","DT","ADDRESS","DIV","plaintextStartTagInBody","buttonStartTagInBody","BUTTON","aStartTagInBody","activeElementEntry","A","pushElement","bStartTagInBody","nobrStartTagInBody","NOBR","appletStartTagInBody","tableStartTagInBody","areaStartTagInBody","inputStartTagInBody","inputType","getTokenAttr","TYPE","toLowerCase","paramStartTagInBody","hrStartTagInBody","MENUITEM","imageStartTagInBody","IMG","textareaStartTagInBody","xmpStartTagInBody","iframeStartTagInBody","noembedStartTagInBody","selectStartTagInBody","optgroupStartTagInBody","OPTION","rbStartTagInBody","RUBY","rtStartTagInBody","RTC","menuitemStartTagInBody","menuStartTagInBody","mathStartTagInBody","adjustTokenMathMLAttrs","adjustTokenXMLAttrs","selfClosing","svgStartTagInBody","adjustTokenSVGAttrs","genericStartTagInBody","I","S","B","U","DL","OL","UL","EM","TT","HR","RB","RT","RP","DIR","NAV","PRE","BIG","WBR","MAIN","CODE","FONT","AREA","MATH","MENU","ASIDE","SMALL","EMBED","INPUT","PARAM","TRACK","IMAGE","FRAME","CENTER","FIGURE","FOOTER","HEADER","HGROUP","STRIKE","STRONG","APPLET","OBJECT","KEYGEN","SOURCE","DETAILS","ARTICLE","SECTION","SUMMARY","LISTING","MARQUEE","FIELDSET","OPTGROUP","BLOCKQUOTE","FIGCAPTION","bodyEndTagInBody","htmlEndTagInBody","addressEndTagInBody","formEndTagInBody","pEndTagInBody","liEndTagInBody","hasInListItemScope","ddEndTagInBody","numberedHeaderEndTagInBody","hasNumberedHeaderInScope","popUntilNumberedHeaderPopped","appletEndTagInBody","brEndTagInBody","curTn","tokenInTable","captionStartTagInTable","clearBackToTableContext","colgroupStartTagInTable","colStartTagInTable","tbodyStartTagInTable","tdStartTagInTable","tableStartTagInTable","hasInTableScope","inputStartTagInTable","formStartTagInTable","savedFosterParentingState","clearBackToTableBodyContext","hasTableBodyContextInTableScope","clearBackToTableRowContext","hasInSelectScope","prevOpenElement","prevOpenElementTn","isRootHtmlElementCurrent","REPLACEMENT_CHARACTER","causesExit","currentNs","adjustTokenSVGTagName"],"sources":["C:/Users/Sator/WebProjects/kanjiMnemonics/create-react-app/node_modules/react-render-html/node_modules/parse5/lib/parser/index.js"],"sourcesContent":["'use strict';\n\nvar Tokenizer = require('../tokenizer'),\n    OpenElementStack = require('./open_element_stack'),\n    FormattingElementList = require('./formatting_element_list'),\n    LocationInfoParserMixin = require('../extensions/location_info/parser_mixin'),\n    defaultTreeAdapter = require('../tree_adapters/default'),\n    mergeOptions = require('../utils/merge_options'),\n    doctype = require('../common/doctype'),\n    foreignContent = require('../common/foreign_content'),\n    UNICODE = require('../common/unicode'),\n    HTML = require('../common/html');\n\n//Aliases\nvar $ = HTML.TAG_NAMES,\n    NS = HTML.NAMESPACES,\n    ATTRS = HTML.ATTRS;\n\nvar DEFAULT_OPTIONS = {\n    locationInfo: false,\n    treeAdapter: defaultTreeAdapter\n};\n\n//Misc constants\nvar HIDDEN_INPUT_TYPE = 'hidden';\n\n//Adoption agency loops iteration count\nvar AA_OUTER_LOOP_ITER = 8,\n    AA_INNER_LOOP_ITER = 3;\n\n//Insertion modes\nvar INITIAL_MODE = 'INITIAL_MODE',\n    BEFORE_HTML_MODE = 'BEFORE_HTML_MODE',\n    BEFORE_HEAD_MODE = 'BEFORE_HEAD_MODE',\n    IN_HEAD_MODE = 'IN_HEAD_MODE',\n    AFTER_HEAD_MODE = 'AFTER_HEAD_MODE',\n    IN_BODY_MODE = 'IN_BODY_MODE',\n    TEXT_MODE = 'TEXT_MODE',\n    IN_TABLE_MODE = 'IN_TABLE_MODE',\n    IN_TABLE_TEXT_MODE = 'IN_TABLE_TEXT_MODE',\n    IN_CAPTION_MODE = 'IN_CAPTION_MODE',\n    IN_COLUMN_GROUP_MODE = 'IN_COLUMN_GROUP_MODE',\n    IN_TABLE_BODY_MODE = 'IN_TABLE_BODY_MODE',\n    IN_ROW_MODE = 'IN_ROW_MODE',\n    IN_CELL_MODE = 'IN_CELL_MODE',\n    IN_SELECT_MODE = 'IN_SELECT_MODE',\n    IN_SELECT_IN_TABLE_MODE = 'IN_SELECT_IN_TABLE_MODE',\n    IN_TEMPLATE_MODE = 'IN_TEMPLATE_MODE',\n    AFTER_BODY_MODE = 'AFTER_BODY_MODE',\n    IN_FRAMESET_MODE = 'IN_FRAMESET_MODE',\n    AFTER_FRAMESET_MODE = 'AFTER_FRAMESET_MODE',\n    AFTER_AFTER_BODY_MODE = 'AFTER_AFTER_BODY_MODE',\n    AFTER_AFTER_FRAMESET_MODE = 'AFTER_AFTER_FRAMESET_MODE';\n\n//Insertion mode reset map\nvar INSERTION_MODE_RESET_MAP = Object.create(null);\n\nINSERTION_MODE_RESET_MAP[$.TR] = IN_ROW_MODE;\nINSERTION_MODE_RESET_MAP[$.TBODY] =\nINSERTION_MODE_RESET_MAP[$.THEAD] =\nINSERTION_MODE_RESET_MAP[$.TFOOT] = IN_TABLE_BODY_MODE;\nINSERTION_MODE_RESET_MAP[$.CAPTION] = IN_CAPTION_MODE;\nINSERTION_MODE_RESET_MAP[$.COLGROUP] = IN_COLUMN_GROUP_MODE;\nINSERTION_MODE_RESET_MAP[$.TABLE] = IN_TABLE_MODE;\nINSERTION_MODE_RESET_MAP[$.BODY] = IN_BODY_MODE;\nINSERTION_MODE_RESET_MAP[$.FRAMESET] = IN_FRAMESET_MODE;\n\n//Template insertion mode switch map\nvar TEMPLATE_INSERTION_MODE_SWITCH_MAP = Object.create(null);\n\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.CAPTION] =\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COLGROUP] =\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TBODY] =\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TFOOT] =\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.THEAD] = IN_TABLE_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.COL] = IN_COLUMN_GROUP_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TR] = IN_TABLE_BODY_MODE;\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TD] =\nTEMPLATE_INSERTION_MODE_SWITCH_MAP[$.TH] = IN_ROW_MODE;\n\n//Token handlers map for insertion modes\nvar _ = Object.create(null);\n\n_[INITIAL_MODE] = Object.create(null);\n_[INITIAL_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[INITIAL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInInitialMode;\n_[INITIAL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[INITIAL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[INITIAL_MODE][Tokenizer.DOCTYPE_TOKEN] = doctypeInInitialMode;\n_[INITIAL_MODE][Tokenizer.START_TAG_TOKEN] =\n_[INITIAL_MODE][Tokenizer.END_TAG_TOKEN] =\n_[INITIAL_MODE][Tokenizer.EOF_TOKEN] = tokenInInitialMode;\n\n_[BEFORE_HTML_MODE] = Object.create(null);\n_[BEFORE_HTML_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[BEFORE_HTML_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[BEFORE_HTML_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[BEFORE_HTML_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[BEFORE_HTML_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHtml;\n_[BEFORE_HTML_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHtml;\n\n_[BEFORE_HEAD_MODE] = Object.create(null);\n_[BEFORE_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[BEFORE_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = ignoreToken;\n_[BEFORE_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[BEFORE_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[BEFORE_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagBeforeHead;\n_[BEFORE_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenBeforeHead;\n\n_[IN_HEAD_MODE] = Object.create(null);\n_[IN_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInHead;\n_[IN_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagInHead;\n_[IN_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagInHead;\n_[IN_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenInHead;\n\n_[AFTER_HEAD_MODE] = Object.create(null);\n_[AFTER_HEAD_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[AFTER_HEAD_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[AFTER_HEAD_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[AFTER_HEAD_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_HEAD_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterHead;\n_[AFTER_HEAD_MODE][Tokenizer.EOF_TOKEN] = tokenAfterHead;\n\n_[IN_BODY_MODE] = Object.create(null);\n_[IN_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInBody;\n_[IN_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInBody;\n_[IN_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[TEXT_MODE] = Object.create(null);\n_[TEXT_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\n_[TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[TEXT_MODE][Tokenizer.COMMENT_TOKEN] =\n_[TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] =\n_[TEXT_MODE][Tokenizer.START_TAG_TOKEN] = ignoreToken;\n_[TEXT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInText;\n_[TEXT_MODE][Tokenizer.EOF_TOKEN] = eofInText;\n\n_[IN_TABLE_MODE] = Object.create(null);\n_[IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\n_[IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTable;\n_[IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTable;\n_[IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_TABLE_TEXT_MODE] = Object.create(null);\n_[IN_TABLE_TEXT_MODE][Tokenizer.CHARACTER_TOKEN] = characterInTableText;\n_[IN_TABLE_TEXT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_TABLE_TEXT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInTableText;\n_[IN_TABLE_TEXT_MODE][Tokenizer.COMMENT_TOKEN] =\n_[IN_TABLE_TEXT_MODE][Tokenizer.DOCTYPE_TOKEN] =\n_[IN_TABLE_TEXT_MODE][Tokenizer.START_TAG_TOKEN] =\n_[IN_TABLE_TEXT_MODE][Tokenizer.END_TAG_TOKEN] =\n_[IN_TABLE_TEXT_MODE][Tokenizer.EOF_TOKEN] = tokenInTableText;\n\n_[IN_CAPTION_MODE] = Object.create(null);\n_[IN_CAPTION_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_CAPTION_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_CAPTION_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_CAPTION_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_CAPTION_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_CAPTION_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCaption;\n_[IN_CAPTION_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCaption;\n_[IN_CAPTION_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_COLUMN_GROUP_MODE] = Object.create(null);\n_[IN_COLUMN_GROUP_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_COLUMN_GROUP_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.START_TAG_TOKEN] = startTagInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.END_TAG_TOKEN] = endTagInColumnGroup;\n_[IN_COLUMN_GROUP_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_TABLE_BODY_MODE] = Object.create(null);\n_[IN_TABLE_BODY_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_TABLE_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\n_[IN_TABLE_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_TABLE_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TABLE_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TABLE_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTableBody;\n_[IN_TABLE_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTableBody;\n_[IN_TABLE_BODY_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_ROW_MODE] = Object.create(null);\n_[IN_ROW_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_ROW_MODE][Tokenizer.NULL_CHARACTER_TOKEN] =\n_[IN_ROW_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = characterInTable;\n_[IN_ROW_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_ROW_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_ROW_MODE][Tokenizer.START_TAG_TOKEN] = startTagInRow;\n_[IN_ROW_MODE][Tokenizer.END_TAG_TOKEN] = endTagInRow;\n_[IN_ROW_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_CELL_MODE] = Object.create(null);\n_[IN_CELL_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_CELL_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_CELL_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_CELL_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_CELL_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_CELL_MODE][Tokenizer.START_TAG_TOKEN] = startTagInCell;\n_[IN_CELL_MODE][Tokenizer.END_TAG_TOKEN] = endTagInCell;\n_[IN_CELL_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_SELECT_MODE] = Object.create(null);\n_[IN_SELECT_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_SELECT_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_SELECT_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_SELECT_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelect;\n_[IN_SELECT_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelect;\n_[IN_SELECT_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_SELECT_IN_TABLE_MODE] = Object.create(null);\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInSelectInTable;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInSelectInTable;\n_[IN_SELECT_IN_TABLE_MODE][Tokenizer.EOF_TOKEN] = eofInBody;\n\n_[IN_TEMPLATE_MODE] = Object.create(null);\n_[IN_TEMPLATE_MODE][Tokenizer.CHARACTER_TOKEN] = characterInBody;\n_[IN_TEMPLATE_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_TEMPLATE_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[IN_TEMPLATE_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_TEMPLATE_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_TEMPLATE_MODE][Tokenizer.START_TAG_TOKEN] = startTagInTemplate;\n_[IN_TEMPLATE_MODE][Tokenizer.END_TAG_TOKEN] = endTagInTemplate;\n_[IN_TEMPLATE_MODE][Tokenizer.EOF_TOKEN] = eofInTemplate;\n\n_[AFTER_BODY_MODE] = Object.create(null);\n_[AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToRootHtmlElement;\n_[AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterBody;\n_[AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n_[IN_FRAMESET_MODE] = Object.create(null);\n_[IN_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[IN_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[IN_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[IN_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[IN_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[IN_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagInFrameset;\n_[IN_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagInFrameset;\n_[IN_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n_[AFTER_FRAMESET_MODE] = Object.create(null);\n_[AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = insertCharacters;\n_[AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendComment;\n_[AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterFrameset;\n_[AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = endTagAfterFrameset;\n_[AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n_[AFTER_AFTER_BODY_MODE] = Object.create(null);\n_[AFTER_AFTER_BODY_MODE][Tokenizer.CHARACTER_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.END_TAG_TOKEN] = tokenAfterAfterBody;\n_[AFTER_AFTER_BODY_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n_[AFTER_AFTER_FRAMESET_MODE] = Object.create(null);\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.CHARACTER_TOKEN] =\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.NULL_CHARACTER_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.WHITESPACE_CHARACTER_TOKEN] = whitespaceCharacterInBody;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.COMMENT_TOKEN] = appendCommentToDocument;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.DOCTYPE_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.START_TAG_TOKEN] = startTagAfterAfterFrameset;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.END_TAG_TOKEN] = ignoreToken;\n_[AFTER_AFTER_FRAMESET_MODE][Tokenizer.EOF_TOKEN] = stopParsing;\n\n\n//Parser\nvar Parser = module.exports = function (options) {\n    this.options = mergeOptions(DEFAULT_OPTIONS, options);\n\n    this.treeAdapter = this.options.treeAdapter;\n    this.pendingScript = null;\n\n    if (this.options.locationInfo)\n        new LocationInfoParserMixin(this);\n};\n\n// API\nParser.prototype.parse = function (html) {\n    var document = this.treeAdapter.createDocument();\n\n    this._bootstrap(document, null);\n    this.tokenizer.write(html, true);\n    this._runParsingLoop(null);\n\n    return document;\n};\n\nParser.prototype.parseFragment = function (html, fragmentContext) {\n    //NOTE: use <template> element as a fragment context if context element was not provided,\n    //so we will parse in \"forgiving\" manner\n    if (!fragmentContext)\n        fragmentContext = this.treeAdapter.createElement($.TEMPLATE, NS.HTML, []);\n\n    //NOTE: create fake element which will be used as 'document' for fragment parsing.\n    //This is important for jsdom there 'document' can't be recreated, therefore\n    //fragment parsing causes messing of the main `document`.\n    var documentMock = this.treeAdapter.createElement('documentmock', NS.HTML, []);\n\n    this._bootstrap(documentMock, fragmentContext);\n\n    if (this.treeAdapter.getTagName(fragmentContext) === $.TEMPLATE)\n        this._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n\n    this._initTokenizerForFragmentParsing();\n    this._insertFakeRootElement();\n    this._resetInsertionMode();\n    this._findFormInFragmentContext();\n    this.tokenizer.write(html, true);\n    this._runParsingLoop(null);\n\n    var rootElement = this.treeAdapter.getFirstChild(documentMock),\n        fragment = this.treeAdapter.createDocumentFragment();\n\n    this._adoptNodes(rootElement, fragment);\n\n    return fragment;\n};\n\n//Bootstrap parser\nParser.prototype._bootstrap = function (document, fragmentContext) {\n    this.tokenizer = new Tokenizer(this.options);\n\n    this.stopped = false;\n\n    this.insertionMode = INITIAL_MODE;\n    this.originalInsertionMode = '';\n\n    this.document = document;\n    this.fragmentContext = fragmentContext;\n\n    this.headElement = null;\n    this.formElement = null;\n\n    this.openElements = new OpenElementStack(this.document, this.treeAdapter);\n    this.activeFormattingElements = new FormattingElementList(this.treeAdapter);\n\n    this.tmplInsertionModeStack = [];\n    this.tmplInsertionModeStackTop = -1;\n    this.currentTmplInsertionMode = null;\n\n    this.pendingCharacterTokens = [];\n    this.hasNonWhitespacePendingCharacterToken = false;\n\n    this.framesetOk = true;\n    this.skipNextNewLine = false;\n    this.fosterParentingEnabled = false;\n};\n\n//Parsing loop\nParser.prototype._runParsingLoop  = function (scriptHandler) {\n    while (!this.stopped) {\n        this._setupTokenizerCDATAMode();\n\n        var token = this.tokenizer.getNextToken();\n\n        if (token.type === Tokenizer.HIBERNATION_TOKEN)\n            break;\n\n        if (this.skipNextNewLine) {\n            this.skipNextNewLine = false;\n\n            if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n                if (token.chars.length === 1)\n                    continue;\n\n                token.chars = token.chars.substr(1);\n            }\n        }\n\n        this._processInputToken(token);\n\n        if (scriptHandler && this.pendingScript)\n            break;\n    }\n};\n\nParser.prototype.runParsingLoopForCurrentChunk = function (writeCallback, scriptHandler) {\n    this._runParsingLoop(scriptHandler);\n\n    if (scriptHandler && this.pendingScript) {\n        var script = this.pendingScript;\n\n        this.pendingScript = null;\n\n        scriptHandler(script);\n\n        return;\n    }\n\n    if (writeCallback)\n        writeCallback();\n};\n\n//Text parsing\nParser.prototype._setupTokenizerCDATAMode = function () {\n    var current = this._getAdjustedCurrentElement();\n\n    this.tokenizer.allowCDATA = current && current !== this.document &&\n                                this.treeAdapter.getNamespaceURI(current) !== NS.HTML && !this._isIntegrationPoint(current);\n};\n\nParser.prototype._switchToTextParsing = function (currentToken, nextTokenizerState) {\n    this._insertElement(currentToken, NS.HTML);\n    this.tokenizer.state = nextTokenizerState;\n    this.originalInsertionMode = this.insertionMode;\n    this.insertionMode = TEXT_MODE;\n};\n\nParser.prototype.switchToPlaintextParsing = function () {\n    this.insertionMode = TEXT_MODE;\n    this.originalInsertionMode = IN_BODY_MODE;\n    this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n};\n\n//Fragment parsing\nParser.prototype._getAdjustedCurrentElement = function () {\n    return this.openElements.stackTop === 0 && this.fragmentContext ?\n        this.fragmentContext :\n        this.openElements.current;\n};\n\nParser.prototype._findFormInFragmentContext = function () {\n    var node = this.fragmentContext;\n\n    do {\n        if (this.treeAdapter.getTagName(node) === $.FORM) {\n            this.formElement = node;\n            break;\n        }\n\n        node = this.treeAdapter.getParentNode(node);\n    } while (node);\n};\n\nParser.prototype._initTokenizerForFragmentParsing = function () {\n    if (this.treeAdapter.getNamespaceURI(this.fragmentContext) === NS.HTML) {\n        var tn = this.treeAdapter.getTagName(this.fragmentContext);\n\n        if (tn === $.TITLE || tn === $.TEXTAREA)\n            this.tokenizer.state = Tokenizer.MODE.RCDATA;\n\n        else if (tn === $.STYLE || tn === $.XMP || tn === $.IFRAME ||\n                 tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT)\n            this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n\n        else if (tn === $.SCRIPT)\n            this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n\n        else if (tn === $.PLAINTEXT)\n            this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n    }\n};\n\n//Tree mutation\nParser.prototype._setDocumentType = function (token) {\n    this.treeAdapter.setDocumentType(this.document, token.name, token.publicId, token.systemId);\n};\n\nParser.prototype._attachElementToTree = function (element) {\n    if (this._shouldFosterParentOnInsertion())\n        this._fosterParentElement(element);\n\n    else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n\n        this.treeAdapter.appendChild(parent, element);\n    }\n};\n\nParser.prototype._appendElement = function (token, namespaceURI) {\n    var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n    this._attachElementToTree(element);\n};\n\nParser.prototype._insertElement = function (token, namespaceURI) {\n    var element = this.treeAdapter.createElement(token.tagName, namespaceURI, token.attrs);\n\n    this._attachElementToTree(element);\n    this.openElements.push(element);\n};\n\nParser.prototype._insertFakeElement = function (tagName) {\n    var element = this.treeAdapter.createElement(tagName, NS.HTML, []);\n\n    this._attachElementToTree(element);\n    this.openElements.push(element);\n};\n\nParser.prototype._insertTemplate = function (token) {\n    var tmpl = this.treeAdapter.createElement(token.tagName, NS.HTML, token.attrs),\n        content = this.treeAdapter.createDocumentFragment();\n\n    this.treeAdapter.setTemplateContent(tmpl, content);\n    this._attachElementToTree(tmpl);\n    this.openElements.push(tmpl);\n};\n\nParser.prototype._insertFakeRootElement = function () {\n    var element = this.treeAdapter.createElement($.HTML, NS.HTML, []);\n\n    this.treeAdapter.appendChild(this.openElements.current, element);\n    this.openElements.push(element);\n};\n\nParser.prototype._appendCommentNode = function (token, parent) {\n    var commentNode = this.treeAdapter.createCommentNode(token.data);\n\n    this.treeAdapter.appendChild(parent, commentNode);\n};\n\nParser.prototype._insertCharacters = function (token) {\n    if (this._shouldFosterParentOnInsertion())\n        this._fosterParentText(token.chars);\n\n    else {\n        var parent = this.openElements.currentTmplContent || this.openElements.current;\n\n        this.treeAdapter.insertText(parent, token.chars);\n    }\n};\n\nParser.prototype._adoptNodes = function (donor, recipient) {\n    while (true) {\n        var child = this.treeAdapter.getFirstChild(donor);\n\n        if (!child)\n            break;\n\n        this.treeAdapter.detachNode(child);\n        this.treeAdapter.appendChild(recipient, child);\n    }\n};\n\n//Token processing\nParser.prototype._shouldProcessTokenInForeignContent = function (token) {\n    var current = this._getAdjustedCurrentElement();\n\n    if (!current || current === this.document)\n        return false;\n\n    var ns = this.treeAdapter.getNamespaceURI(current);\n\n    if (ns === NS.HTML)\n        return false;\n\n    if (this.treeAdapter.getTagName(current) === $.ANNOTATION_XML && ns === NS.MATHML &&\n        token.type === Tokenizer.START_TAG_TOKEN && token.tagName === $.SVG)\n        return false;\n\n    var isCharacterToken = token.type === Tokenizer.CHARACTER_TOKEN ||\n                           token.type === Tokenizer.NULL_CHARACTER_TOKEN ||\n                           token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN,\n        isMathMLTextStartTag = token.type === Tokenizer.START_TAG_TOKEN &&\n                               token.tagName !== $.MGLYPH &&\n                               token.tagName !== $.MALIGNMARK;\n\n    if ((isMathMLTextStartTag || isCharacterToken) && this._isIntegrationPoint(current, NS.MATHML))\n        return false;\n\n    if ((token.type === Tokenizer.START_TAG_TOKEN || isCharacterToken) && this._isIntegrationPoint(current, NS.HTML))\n        return false;\n\n    return token.type !== Tokenizer.EOF_TOKEN;\n};\n\nParser.prototype._processToken = function (token) {\n    _[this.insertionMode][token.type](this, token);\n};\n\nParser.prototype._processTokenInBodyMode = function (token) {\n    _[IN_BODY_MODE][token.type](this, token);\n};\n\nParser.prototype._processTokenInForeignContent = function (token) {\n    if (token.type === Tokenizer.CHARACTER_TOKEN)\n        characterInForeignContent(this, token);\n\n    else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN)\n        nullCharacterInForeignContent(this, token);\n\n    else if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN)\n        insertCharacters(this, token);\n\n    else if (token.type === Tokenizer.COMMENT_TOKEN)\n        appendComment(this, token);\n\n    else if (token.type === Tokenizer.START_TAG_TOKEN)\n        startTagInForeignContent(this, token);\n\n    else if (token.type === Tokenizer.END_TAG_TOKEN)\n        endTagInForeignContent(this, token);\n};\n\nParser.prototype._processInputToken = function (token) {\n    if (this._shouldProcessTokenInForeignContent(token))\n        this._processTokenInForeignContent(token);\n\n    else\n        this._processToken(token);\n};\n\n//Integration points\nParser.prototype._isIntegrationPoint = function (element, foreignNS) {\n    var tn = this.treeAdapter.getTagName(element),\n        ns = this.treeAdapter.getNamespaceURI(element),\n        attrs = this.treeAdapter.getAttrList(element);\n\n    return foreignContent.isIntegrationPoint(tn, ns, attrs, foreignNS);\n};\n\n//Active formatting elements reconstruction\nParser.prototype._reconstructActiveFormattingElements = function () {\n    var listLength = this.activeFormattingElements.length;\n\n    if (listLength) {\n        var unopenIdx = listLength,\n            entry = null;\n\n        do {\n            unopenIdx--;\n            entry = this.activeFormattingElements.entries[unopenIdx];\n\n            if (entry.type === FormattingElementList.MARKER_ENTRY || this.openElements.contains(entry.element)) {\n                unopenIdx++;\n                break;\n            }\n        } while (unopenIdx > 0);\n\n        for (var i = unopenIdx; i < listLength; i++) {\n            entry = this.activeFormattingElements.entries[i];\n            this._insertElement(entry.token, this.treeAdapter.getNamespaceURI(entry.element));\n            entry.element = this.openElements.current;\n        }\n    }\n};\n\n//Close elements\nParser.prototype._closeTableCell = function () {\n    this.openElements.generateImpliedEndTags();\n    this.openElements.popUntilTableCellPopped();\n    this.activeFormattingElements.clearToLastMarker();\n    this.insertionMode = IN_ROW_MODE;\n};\n\nParser.prototype._closePElement = function () {\n    this.openElements.generateImpliedEndTagsWithExclusion($.P);\n    this.openElements.popUntilTagNamePopped($.P);\n};\n\n//Insertion modes\nParser.prototype._resetInsertionMode = function () {\n    for (var i = this.openElements.stackTop, last = false; i >= 0; i--) {\n        var element = this.openElements.items[i];\n\n        if (i === 0) {\n            last = true;\n\n            if (this.fragmentContext)\n                element = this.fragmentContext;\n        }\n\n        var tn = this.treeAdapter.getTagName(element),\n            newInsertionMode = INSERTION_MODE_RESET_MAP[tn];\n\n        if (newInsertionMode) {\n            this.insertionMode = newInsertionMode;\n            break;\n        }\n\n        else if (!last && (tn === $.TD || tn === $.TH)) {\n            this.insertionMode = IN_CELL_MODE;\n            break;\n        }\n\n        else if (!last && tn === $.HEAD) {\n            this.insertionMode = IN_HEAD_MODE;\n            break;\n        }\n\n        else if (tn === $.SELECT) {\n            this._resetInsertionModeForSelect(i);\n            break;\n        }\n\n        else if (tn === $.TEMPLATE) {\n            this.insertionMode = this.currentTmplInsertionMode;\n            break;\n        }\n\n        else if (tn === $.HTML) {\n            this.insertionMode = this.headElement ? AFTER_HEAD_MODE : BEFORE_HEAD_MODE;\n            break;\n        }\n\n        else if (last) {\n            this.insertionMode = IN_BODY_MODE;\n            break;\n        }\n    }\n};\n\nParser.prototype._resetInsertionModeForSelect = function (selectIdx) {\n    if (selectIdx > 0) {\n        for (var i = selectIdx - 1; i > 0; i--) {\n            var ancestor = this.openElements.items[i],\n                tn = this.treeAdapter.getTagName(ancestor);\n\n            if (tn === $.TEMPLATE)\n                break;\n\n            else if (tn === $.TABLE) {\n                this.insertionMode = IN_SELECT_IN_TABLE_MODE;\n                return;\n            }\n        }\n    }\n\n    this.insertionMode = IN_SELECT_MODE;\n};\n\nParser.prototype._pushTmplInsertionMode = function (mode) {\n    this.tmplInsertionModeStack.push(mode);\n    this.tmplInsertionModeStackTop++;\n    this.currentTmplInsertionMode = mode;\n};\n\nParser.prototype._popTmplInsertionMode = function () {\n    this.tmplInsertionModeStack.pop();\n    this.tmplInsertionModeStackTop--;\n    this.currentTmplInsertionMode = this.tmplInsertionModeStack[this.tmplInsertionModeStackTop];\n};\n\n//Foster parenting\nParser.prototype._isElementCausesFosterParenting = function (element) {\n    var tn = this.treeAdapter.getTagName(element);\n\n    return tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR;\n};\n\nParser.prototype._shouldFosterParentOnInsertion = function () {\n    return this.fosterParentingEnabled && this._isElementCausesFosterParenting(this.openElements.current);\n};\n\nParser.prototype._findFosterParentingLocation = function () {\n    var location = {\n        parent: null,\n        beforeElement: null\n    };\n\n    for (var i = this.openElements.stackTop; i >= 0; i--) {\n        var openElement = this.openElements.items[i],\n            tn = this.treeAdapter.getTagName(openElement),\n            ns = this.treeAdapter.getNamespaceURI(openElement);\n\n        if (tn === $.TEMPLATE && ns === NS.HTML) {\n            location.parent = this.treeAdapter.getTemplateContent(openElement);\n            break;\n        }\n\n        else if (tn === $.TABLE) {\n            location.parent = this.treeAdapter.getParentNode(openElement);\n\n            if (location.parent)\n                location.beforeElement = openElement;\n            else\n                location.parent = this.openElements.items[i - 1];\n\n            break;\n        }\n    }\n\n    if (!location.parent)\n        location.parent = this.openElements.items[0];\n\n    return location;\n};\n\nParser.prototype._fosterParentElement = function (element) {\n    var location = this._findFosterParentingLocation();\n\n    if (location.beforeElement)\n        this.treeAdapter.insertBefore(location.parent, element, location.beforeElement);\n    else\n        this.treeAdapter.appendChild(location.parent, element);\n};\n\nParser.prototype._fosterParentText = function (chars) {\n    var location = this._findFosterParentingLocation();\n\n    if (location.beforeElement)\n        this.treeAdapter.insertTextBefore(location.parent, chars, location.beforeElement);\n    else\n        this.treeAdapter.insertText(location.parent, chars);\n};\n\n//Special elements\nParser.prototype._isSpecialElement = function (element) {\n    var tn = this.treeAdapter.getTagName(element),\n        ns = this.treeAdapter.getNamespaceURI(element);\n\n    return HTML.SPECIAL_ELEMENTS[ns][tn];\n};\n\n//Adoption agency algorithm\n//(see: http://www.whatwg.org/specs/web-apps/current-work/multipage/tree-construction.html#adoptionAgency)\n//------------------------------------------------------------------\n\n//Steps 5-8 of the algorithm\nfunction aaObtainFormattingElementEntry(p, token) {\n    var formattingElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName(token.tagName);\n\n    if (formattingElementEntry) {\n        if (!p.openElements.contains(formattingElementEntry.element)) {\n            p.activeFormattingElements.removeEntry(formattingElementEntry);\n            formattingElementEntry = null;\n        }\n\n        else if (!p.openElements.hasInScope(token.tagName))\n            formattingElementEntry = null;\n    }\n\n    else\n        genericEndTagInBody(p, token);\n\n    return formattingElementEntry;\n}\n\n//Steps 9 and 10 of the algorithm\nfunction aaObtainFurthestBlock(p, formattingElementEntry) {\n    var furthestBlock = null;\n\n    for (var i = p.openElements.stackTop; i >= 0; i--) {\n        var element = p.openElements.items[i];\n\n        if (element === formattingElementEntry.element)\n            break;\n\n        if (p._isSpecialElement(element))\n            furthestBlock = element;\n    }\n\n    if (!furthestBlock) {\n        p.openElements.popUntilElementPopped(formattingElementEntry.element);\n        p.activeFormattingElements.removeEntry(formattingElementEntry);\n    }\n\n    return furthestBlock;\n}\n\n//Step 13 of the algorithm\nfunction aaInnerLoop(p, furthestBlock, formattingElement) {\n    var lastElement = furthestBlock,\n        nextElement = p.openElements.getCommonAncestor(furthestBlock);\n\n    for (var i = 0, element = nextElement; element !== formattingElement; i++, element = nextElement) {\n        //NOTE: store next element for the next loop iteration (it may be deleted from the stack by step 9.5)\n        nextElement = p.openElements.getCommonAncestor(element);\n\n        var elementEntry = p.activeFormattingElements.getElementEntry(element),\n            counterOverflow = elementEntry && i >= AA_INNER_LOOP_ITER,\n            shouldRemoveFromOpenElements = !elementEntry || counterOverflow;\n\n        if (shouldRemoveFromOpenElements) {\n            if (counterOverflow)\n                p.activeFormattingElements.removeEntry(elementEntry);\n\n            p.openElements.remove(element);\n        }\n\n        else {\n            element = aaRecreateElementFromEntry(p, elementEntry);\n\n            if (lastElement === furthestBlock)\n                p.activeFormattingElements.bookmark = elementEntry;\n\n            p.treeAdapter.detachNode(lastElement);\n            p.treeAdapter.appendChild(element, lastElement);\n            lastElement = element;\n        }\n    }\n\n    return lastElement;\n}\n\n//Step 13.7 of the algorithm\nfunction aaRecreateElementFromEntry(p, elementEntry) {\n    var ns = p.treeAdapter.getNamespaceURI(elementEntry.element),\n        newElement = p.treeAdapter.createElement(elementEntry.token.tagName, ns, elementEntry.token.attrs);\n\n    p.openElements.replace(elementEntry.element, newElement);\n    elementEntry.element = newElement;\n\n    return newElement;\n}\n\n//Step 14 of the algorithm\nfunction aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement) {\n    if (p._isElementCausesFosterParenting(commonAncestor))\n        p._fosterParentElement(lastElement);\n\n    else {\n        var tn = p.treeAdapter.getTagName(commonAncestor),\n            ns = p.treeAdapter.getNamespaceURI(commonAncestor);\n\n        if (tn === $.TEMPLATE && ns === NS.HTML)\n            commonAncestor = p.treeAdapter.getTemplateContent(commonAncestor);\n\n        p.treeAdapter.appendChild(commonAncestor, lastElement);\n    }\n}\n\n//Steps 15-19 of the algorithm\nfunction aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry) {\n    var ns = p.treeAdapter.getNamespaceURI(formattingElementEntry.element),\n        token = formattingElementEntry.token,\n        newElement = p.treeAdapter.createElement(token.tagName, ns, token.attrs);\n\n    p._adoptNodes(furthestBlock, newElement);\n    p.treeAdapter.appendChild(furthestBlock, newElement);\n\n    p.activeFormattingElements.insertElementAfterBookmark(newElement, formattingElementEntry.token);\n    p.activeFormattingElements.removeEntry(formattingElementEntry);\n\n    p.openElements.remove(formattingElementEntry.element);\n    p.openElements.insertAfter(furthestBlock, newElement);\n}\n\n//Algorithm entry point\nfunction callAdoptionAgency(p, token) {\n    var formattingElementEntry;\n\n    for (var i = 0; i < AA_OUTER_LOOP_ITER; i++) {\n        formattingElementEntry = aaObtainFormattingElementEntry(p, token, formattingElementEntry);\n\n        if (!formattingElementEntry)\n            break;\n\n        var furthestBlock = aaObtainFurthestBlock(p, formattingElementEntry);\n\n        if (!furthestBlock)\n            break;\n\n        p.activeFormattingElements.bookmark = formattingElementEntry;\n\n        var lastElement = aaInnerLoop(p, furthestBlock, formattingElementEntry.element),\n            commonAncestor = p.openElements.getCommonAncestor(formattingElementEntry.element);\n\n        p.treeAdapter.detachNode(lastElement);\n        aaInsertLastNodeInCommonAncestor(p, commonAncestor, lastElement);\n        aaReplaceFormattingElement(p, furthestBlock, formattingElementEntry);\n    }\n}\n\n\n//Generic token handlers\n//------------------------------------------------------------------\nfunction ignoreToken() {\n    //NOTE: do nothing =)\n}\n\nfunction appendComment(p, token) {\n    p._appendCommentNode(token, p.openElements.currentTmplContent || p.openElements.current);\n}\n\nfunction appendCommentToRootHtmlElement(p, token) {\n    p._appendCommentNode(token, p.openElements.items[0]);\n}\n\nfunction appendCommentToDocument(p, token) {\n    p._appendCommentNode(token, p.document);\n}\n\nfunction insertCharacters(p, token) {\n    p._insertCharacters(token);\n}\n\nfunction stopParsing(p) {\n    p.stopped = true;\n}\n\n//12.2.5.4.1 The \"initial\" insertion mode\n//------------------------------------------------------------------\nfunction doctypeInInitialMode(p, token) {\n    p._setDocumentType(token);\n\n    var mode = token.forceQuirks ?\n        HTML.DOCUMENT_MODE.QUIRKS :\n        doctype.getDocumentMode(token.name, token.publicId, token.systemId);\n\n    p.treeAdapter.setDocumentMode(p.document, mode);\n\n    p.insertionMode = BEFORE_HTML_MODE;\n}\n\nfunction tokenInInitialMode(p, token) {\n    p.treeAdapter.setDocumentMode(p.document, HTML.DOCUMENT_MODE.QUIRKS);\n    p.insertionMode = BEFORE_HTML_MODE;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.2 The \"before html\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHtml(p, token) {\n    if (token.tagName === $.HTML) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = BEFORE_HEAD_MODE;\n    }\n\n    else\n        tokenBeforeHtml(p, token);\n}\n\nfunction endTagBeforeHtml(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML || tn === $.HEAD || tn === $.BODY || tn === $.BR)\n        tokenBeforeHtml(p, token);\n}\n\nfunction tokenBeforeHtml(p, token) {\n    p._insertFakeRootElement();\n    p.insertionMode = BEFORE_HEAD_MODE;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.3 The \"before head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagBeforeHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.HEAD) {\n        p._insertElement(token, NS.HTML);\n        p.headElement = p.openElements.current;\n        p.insertionMode = IN_HEAD_MODE;\n    }\n\n    else\n        tokenBeforeHead(p, token);\n}\n\nfunction endTagBeforeHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HEAD || tn === $.BODY || tn === $.HTML || tn === $.BR)\n        tokenBeforeHead(p, token);\n}\n\nfunction tokenBeforeHead(p, token) {\n    p._insertFakeElement($.HEAD);\n    p.headElement = p.openElements.current;\n    p.insertionMode = IN_HEAD_MODE;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.4 The \"in head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META)\n        p._appendElement(token, NS.HTML);\n\n    else if (tn === $.TITLE)\n        p._switchToTextParsing(token, Tokenizer.MODE.RCDATA);\n\n    //NOTE: here we assume that we always act as an interactive user agent with enabled scripting, so we parse\n    //<noscript> as a rawtext.\n    else if (tn === $.NOSCRIPT || tn === $.NOFRAMES || tn === $.STYLE)\n        p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n\n    else if (tn === $.SCRIPT)\n        p._switchToTextParsing(token, Tokenizer.MODE.SCRIPT_DATA);\n\n    else if (tn === $.TEMPLATE) {\n        p._insertTemplate(token, NS.HTML);\n        p.activeFormattingElements.insertMarker();\n        p.framesetOk = false;\n        p.insertionMode = IN_TEMPLATE_MODE;\n        p._pushTmplInsertionMode(IN_TEMPLATE_MODE);\n    }\n\n    else if (tn !== $.HEAD)\n        tokenInHead(p, token);\n}\n\nfunction endTagInHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HEAD) {\n        p.openElements.pop();\n        p.insertionMode = AFTER_HEAD_MODE;\n    }\n\n    else if (tn === $.BODY || tn === $.BR || tn === $.HTML)\n        tokenInHead(p, token);\n\n    else if (tn === $.TEMPLATE && p.openElements.tmplCount > 0) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped($.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p._popTmplInsertionMode();\n        p._resetInsertionMode();\n    }\n}\n\nfunction tokenInHead(p, token) {\n    p.openElements.pop();\n    p.insertionMode = AFTER_HEAD_MODE;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.6 The \"after head\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.BODY) {\n        p._insertElement(token, NS.HTML);\n        p.framesetOk = false;\n        p.insertionMode = IN_BODY_MODE;\n    }\n\n    else if (tn === $.FRAMESET) {\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    }\n\n    else if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META ||\n             tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE) {\n        p.openElements.push(p.headElement);\n        startTagInHead(p, token);\n        p.openElements.remove(p.headElement);\n    }\n\n    else if (tn !== $.HEAD)\n        tokenAfterHead(p, token);\n}\n\nfunction endTagAfterHead(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.BODY || tn === $.HTML || tn === $.BR)\n        tokenAfterHead(p, token);\n\n    else if (tn === $.TEMPLATE)\n        endTagInHead(p, token);\n}\n\nfunction tokenAfterHead(p, token) {\n    p._insertFakeElement($.BODY);\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.7 The \"in body\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n}\n\nfunction characterInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction htmlStartTagInBody(p, token) {\n    if (p.openElements.tmplCount === 0)\n        p.treeAdapter.adoptAttributes(p.openElements.items[0], token.attrs);\n}\n\nfunction bodyStartTagInBody(p, token) {\n    var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (bodyElement && p.openElements.tmplCount === 0) {\n        p.framesetOk = false;\n        p.treeAdapter.adoptAttributes(bodyElement, token.attrs);\n    }\n}\n\nfunction framesetStartTagInBody(p, token) {\n    var bodyElement = p.openElements.tryPeekProperlyNestedBodyElement();\n\n    if (p.framesetOk && bodyElement) {\n        p.treeAdapter.detachNode(bodyElement);\n        p.openElements.popAllUpToHtmlElement();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_FRAMESET_MODE;\n    }\n}\n\nfunction addressStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction numberedHeaderStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    var tn = p.openElements.currentTagName;\n\n    if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\n        p.openElements.pop();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction preStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of pre blocks are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.framesetOk = false;\n}\n\nfunction formStartTagInBody(p, token) {\n    var inTemplate = p.openElements.tmplCount > 0;\n\n    if (!p.formElement || inTemplate) {\n        if (p.openElements.hasInButtonScope($.P))\n            p._closePElement();\n\n        p._insertElement(token, NS.HTML);\n\n        if (!inTemplate)\n            p.formElement = p.openElements.current;\n    }\n}\n\nfunction listItemStartTagInBody(p, token) {\n    p.framesetOk = false;\n\n    var tn = token.tagName;\n\n    for (var i = p.openElements.stackTop; i >= 0; i--) {\n        var element = p.openElements.items[i],\n            elementTn = p.treeAdapter.getTagName(element),\n            closeTn = null;\n\n        if (tn === $.LI && elementTn === $.LI)\n            closeTn = $.LI;\n\n        else if ((tn === $.DD || tn === $.DT) && (elementTn === $.DD || elementTn === $.DT))\n            closeTn = elementTn;\n\n        if (closeTn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(closeTn);\n            p.openElements.popUntilTagNamePopped(closeTn);\n            break;\n        }\n\n        if (elementTn !== $.ADDRESS && elementTn !== $.DIV && elementTn !== $.P && p._isSpecialElement(element))\n            break;\n    }\n\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction plaintextStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._insertElement(token, NS.HTML);\n    p.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n}\n\nfunction buttonStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BUTTON)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped($.BUTTON);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n}\n\nfunction aStartTagInBody(p, token) {\n    var activeElementEntry = p.activeFormattingElements.getElementEntryInScopeWithTagName($.A);\n\n    if (activeElementEntry) {\n        callAdoptionAgency(p, token);\n        p.openElements.remove(activeElementEntry.element);\n        p.activeFormattingElements.removeEntry(activeElementEntry);\n    }\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction bStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction nobrStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    if (p.openElements.hasInScope($.NOBR)) {\n        callAdoptionAgency(p, token);\n        p._reconstructActiveFormattingElements();\n    }\n\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.pushElement(p.openElements.current, token);\n}\n\nfunction appletStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.activeFormattingElements.insertMarker();\n    p.framesetOk = false;\n}\n\nfunction tableStartTagInBody(p, token) {\n    if (p.treeAdapter.getDocumentMode(p.document) !== HTML.DOCUMENT_MODE.QUIRKS && p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n    p.insertionMode = IN_TABLE_MODE;\n}\n\nfunction areaStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n}\n\nfunction inputStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._appendElement(token, NS.HTML);\n\n    var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (!inputType || inputType.toLowerCase() !== HIDDEN_INPUT_TYPE)\n        p.framesetOk = false;\n\n}\n\nfunction paramStartTagInBody(p, token) {\n    p._appendElement(token, NS.HTML);\n}\n\nfunction hrStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    if (p.openElements.currentTagName === $.MENUITEM)\n        p.openElements.pop();\n\n    p._appendElement(token, NS.HTML);\n    p.framesetOk = false;\n}\n\nfunction imageStartTagInBody(p, token) {\n    token.tagName = $.IMG;\n    areaStartTagInBody(p, token);\n}\n\nfunction textareaStartTagInBody(p, token) {\n    p._insertElement(token, NS.HTML);\n    //NOTE: If the next token is a U+000A LINE FEED (LF) character token, then ignore that token and move\n    //on to the next one. (Newlines at the start of textarea elements are ignored as an authoring convenience.)\n    p.skipNextNewLine = true;\n    p.tokenizer.state = Tokenizer.MODE.RCDATA;\n    p.originalInsertionMode = p.insertionMode;\n    p.framesetOk = false;\n    p.insertionMode = TEXT_MODE;\n}\n\nfunction xmpStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    p._reconstructActiveFormattingElements();\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction iframeStartTagInBody(p, token) {\n    p.framesetOk = false;\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\n//NOTE: here we assume that we always act as an user agent with enabled plugins, so we parse\n//<noembed> as a rawtext.\nfunction noembedStartTagInBody(p, token) {\n    p._switchToTextParsing(token, Tokenizer.MODE.RAWTEXT);\n}\n\nfunction selectStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n    p.framesetOk = false;\n\n    if (p.insertionMode === IN_TABLE_MODE ||\n        p.insertionMode === IN_CAPTION_MODE ||\n        p.insertionMode === IN_TABLE_BODY_MODE ||\n        p.insertionMode === IN_ROW_MODE ||\n        p.insertionMode === IN_CELL_MODE)\n\n        p.insertionMode = IN_SELECT_IN_TABLE_MODE;\n\n    else\n        p.insertionMode = IN_SELECT_MODE;\n}\n\nfunction optgroupStartTagInBody(p, token) {\n    if (p.openElements.currentTagName === $.OPTION)\n        p.openElements.pop();\n\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rbStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY))\n        p.openElements.generateImpliedEndTags();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction rtStartTagInBody(p, token) {\n    if (p.openElements.hasInScope($.RUBY))\n        p.openElements.generateImpliedEndTagsWithExclusion($.RTC);\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction menuitemStartTagInBody(p, token) {\n    if (p.openElements.currentTagName === $.MENUITEM)\n        p.openElements.pop();\n\n    // TODO needs clarification, see https://github.com/whatwg/html/pull/907/files#r73505877\n    p._reconstructActiveFormattingElements();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction menuStartTagInBody(p, token) {\n    if (p.openElements.hasInButtonScope($.P))\n        p._closePElement();\n\n    if (p.openElements.currentTagName === $.MENUITEM)\n        p.openElements.pop();\n\n    p._insertElement(token, NS.HTML);\n}\n\nfunction mathStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenMathMLAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing)\n        p._appendElement(token, NS.MATHML);\n    else\n        p._insertElement(token, NS.MATHML);\n}\n\nfunction svgStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n\n    foreignContent.adjustTokenSVGAttrs(token);\n    foreignContent.adjustTokenXMLAttrs(token);\n\n    if (token.selfClosing)\n        p._appendElement(token, NS.SVG);\n    else\n        p._insertElement(token, NS.SVG);\n}\n\nfunction genericStartTagInBody(p, token) {\n    p._reconstructActiveFormattingElements();\n    p._insertElement(token, NS.HTML);\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction startTagInBody(p, token) {\n    var tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.I || tn === $.S || tn === $.B || tn === $.U)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.P)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.A)\n                aStartTagInBody(p, token);\n\n            else\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.OL || tn === $.UL)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\n                numberedHeaderStartTagInBody(p, token);\n\n            else if (tn === $.LI || tn === $.DD || tn === $.DT)\n                listItemStartTagInBody(p, token);\n\n            else if (tn === $.EM || tn === $.TT)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.BR)\n                areaStartTagInBody(p, token);\n\n            else if (tn === $.HR)\n                hrStartTagInBody(p, token);\n\n            else if (tn === $.RB)\n                rbStartTagInBody(p, token);\n\n            else if (tn === $.RT || tn === $.RP)\n                rtStartTagInBody(p, token);\n\n            else if (tn !== $.TH && tn !== $.TD && tn !== $.TR)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 3:\n            if (tn === $.DIV || tn === $.DIR || tn === $.NAV)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.PRE)\n                preStartTagInBody(p, token);\n\n            else if (tn === $.BIG)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.IMG || tn === $.WBR)\n                areaStartTagInBody(p, token);\n\n            else if (tn === $.XMP)\n                xmpStartTagInBody(p, token);\n\n            else if (tn === $.SVG)\n                svgStartTagInBody(p, token);\n\n            else if (tn === $.RTC)\n                rbStartTagInBody(p, token);\n\n            else if (tn !== $.COL)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 4:\n            if (tn === $.HTML)\n                htmlStartTagInBody(p, token);\n\n            else if (tn === $.BASE || tn === $.LINK || tn === $.META)\n                startTagInHead(p, token);\n\n            else if (tn === $.BODY)\n                bodyStartTagInBody(p, token);\n\n            else if (tn === $.MAIN)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.FORM)\n                formStartTagInBody(p, token);\n\n            else if (tn === $.CODE || tn === $.FONT)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.NOBR)\n                nobrStartTagInBody(p, token);\n\n            else if (tn === $.AREA)\n                areaStartTagInBody(p, token);\n\n            else if (tn === $.MATH)\n                mathStartTagInBody(p, token);\n\n            else if (tn === $.MENU)\n                menuStartTagInBody(p, token);\n\n            else if (tn !== $.HEAD)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 5:\n            if (tn === $.STYLE || tn === $.TITLE)\n                startTagInHead(p, token);\n\n            else if (tn === $.ASIDE)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.SMALL)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.TABLE)\n                tableStartTagInBody(p, token);\n\n            else if (tn === $.EMBED)\n                areaStartTagInBody(p, token);\n\n            else if (tn === $.INPUT)\n                inputStartTagInBody(p, token);\n\n            else if (tn === $.PARAM || tn === $.TRACK)\n                paramStartTagInBody(p, token);\n\n            else if (tn === $.IMAGE)\n                imageStartTagInBody(p, token);\n\n            else if (tn !== $.FRAME && tn !== $.TBODY && tn !== $.TFOOT && tn !== $.THEAD)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT)\n                startTagInHead(p, token);\n\n            else if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.BUTTON)\n                buttonStartTagInBody(p, token);\n\n            else if (tn === $.STRIKE || tn === $.STRONG)\n                bStartTagInBody(p, token);\n\n            else if (tn === $.APPLET || tn === $.OBJECT)\n                appletStartTagInBody(p, token);\n\n            else if (tn === $.KEYGEN)\n                areaStartTagInBody(p, token);\n\n            else if (tn === $.SOURCE)\n                paramStartTagInBody(p, token);\n\n            else if (tn === $.IFRAME)\n                iframeStartTagInBody(p, token);\n\n            else if (tn === $.SELECT)\n                selectStartTagInBody(p, token);\n\n            else if (tn === $.OPTION)\n                optgroupStartTagInBody(p, token);\n\n            else\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 7:\n            if (tn === $.BGSOUND)\n                startTagInHead(p, token);\n\n            else if (tn === $.DETAILS || tn === $.ADDRESS || tn === $.ARTICLE || tn === $.SECTION || tn === $.SUMMARY)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.LISTING)\n                preStartTagInBody(p, token);\n\n            else if (tn === $.MARQUEE)\n                appletStartTagInBody(p, token);\n\n            else if (tn === $.NOEMBED)\n                noembedStartTagInBody(p, token);\n\n            else if (tn !== $.CAPTION)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 8:\n            if (tn === $.BASEFONT)\n                startTagInHead(p, token);\n\n            else if (tn === $.MENUITEM)\n                menuitemStartTagInBody(p, token);\n\n            else if (tn === $.FRAMESET)\n                framesetStartTagInBody(p, token);\n\n            else if (tn === $.FIELDSET)\n                addressStartTagInBody(p, token);\n\n            else if (tn === $.TEXTAREA)\n                textareaStartTagInBody(p, token);\n\n            else if (tn === $.TEMPLATE)\n                startTagInHead(p, token);\n\n            else if (tn === $.NOSCRIPT)\n                noembedStartTagInBody(p, token);\n\n            else if (tn === $.OPTGROUP)\n                optgroupStartTagInBody(p, token);\n\n            else if (tn !== $.COLGROUP)\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 9:\n            if (tn === $.PLAINTEXT)\n                plaintextStartTagInBody(p, token);\n\n            else\n                genericStartTagInBody(p, token);\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION)\n                addressStartTagInBody(p, token);\n\n            else\n                genericStartTagInBody(p, token);\n\n            break;\n\n        default:\n            genericStartTagInBody(p, token);\n    }\n}\n\nfunction bodyEndTagInBody(p) {\n    if (p.openElements.hasInScope($.BODY))\n        p.insertionMode = AFTER_BODY_MODE;\n}\n\nfunction htmlEndTagInBody(p, token) {\n    if (p.openElements.hasInScope($.BODY)) {\n        p.insertionMode = AFTER_BODY_MODE;\n        p._processToken(token);\n    }\n}\n\nfunction addressEndTagInBody(p, token) {\n    var tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction formEndTagInBody(p) {\n    var inTemplate = p.openElements.tmplCount > 0,\n        formElement = p.formElement;\n\n    if (!inTemplate)\n        p.formElement = null;\n\n    if ((formElement || inTemplate) && p.openElements.hasInScope($.FORM)) {\n        p.openElements.generateImpliedEndTags();\n\n        if (inTemplate)\n            p.openElements.popUntilTagNamePopped($.FORM);\n\n        else\n            p.openElements.remove(formElement);\n    }\n}\n\nfunction pEndTagInBody(p) {\n    if (!p.openElements.hasInButtonScope($.P))\n        p._insertFakeElement($.P);\n\n    p._closePElement();\n}\n\nfunction liEndTagInBody(p) {\n    if (p.openElements.hasInListItemScope($.LI)) {\n        p.openElements.generateImpliedEndTagsWithExclusion($.LI);\n        p.openElements.popUntilTagNamePopped($.LI);\n    }\n}\n\nfunction ddEndTagInBody(p, token) {\n    var tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTagsWithExclusion(tn);\n        p.openElements.popUntilTagNamePopped(tn);\n    }\n}\n\nfunction numberedHeaderEndTagInBody(p) {\n    if (p.openElements.hasNumberedHeaderInScope()) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilNumberedHeaderPopped();\n    }\n}\n\nfunction appletEndTagInBody(p, token) {\n    var tn = token.tagName;\n\n    if (p.openElements.hasInScope(tn)) {\n        p.openElements.generateImpliedEndTags();\n        p.openElements.popUntilTagNamePopped(tn);\n        p.activeFormattingElements.clearToLastMarker();\n    }\n}\n\nfunction brEndTagInBody(p) {\n    p._reconstructActiveFormattingElements();\n    p._insertFakeElement($.BR);\n    p.openElements.pop();\n    p.framesetOk = false;\n}\n\nfunction genericEndTagInBody(p, token) {\n    var tn = token.tagName;\n\n    for (var i = p.openElements.stackTop; i > 0; i--) {\n        var element = p.openElements.items[i];\n\n        if (p.treeAdapter.getTagName(element) === tn) {\n            p.openElements.generateImpliedEndTagsWithExclusion(tn);\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n\n        if (p._isSpecialElement(element))\n            break;\n    }\n}\n\n//OPTIMIZATION: Integer comparisons are low-cost, so we can use very fast tag name length filters here.\n//It's faster than using dictionary.\nfunction endTagInBody(p, token) {\n    var tn = token.tagName;\n\n    switch (tn.length) {\n        case 1:\n            if (tn === $.A || tn === $.B || tn === $.I || tn === $.S || tn === $.U)\n                callAdoptionAgency(p, token);\n\n            else if (tn === $.P)\n                pEndTagInBody(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 2:\n            if (tn === $.DL || tn === $.UL || tn === $.OL)\n                addressEndTagInBody(p, token);\n\n            else if (tn === $.LI)\n                liEndTagInBody(p, token);\n\n            else if (tn === $.DD || tn === $.DT)\n                ddEndTagInBody(p, token);\n\n            else if (tn === $.H1 || tn === $.H2 || tn === $.H3 || tn === $.H4 || tn === $.H5 || tn === $.H6)\n                numberedHeaderEndTagInBody(p, token);\n\n            else if (tn === $.BR)\n                brEndTagInBody(p, token);\n\n            else if (tn === $.EM || tn === $.TT)\n                callAdoptionAgency(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 3:\n            if (tn === $.BIG)\n                callAdoptionAgency(p, token);\n\n            else if (tn === $.DIR || tn === $.DIV || tn === $.NAV)\n                addressEndTagInBody(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 4:\n            if (tn === $.BODY)\n                bodyEndTagInBody(p, token);\n\n            else if (tn === $.HTML)\n                htmlEndTagInBody(p, token);\n\n            else if (tn === $.FORM)\n                formEndTagInBody(p, token);\n\n            else if (tn === $.CODE || tn === $.FONT || tn === $.NOBR)\n                callAdoptionAgency(p, token);\n\n            else if (tn === $.MAIN || tn === $.MENU)\n                addressEndTagInBody(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 5:\n            if (tn === $.ASIDE)\n                addressEndTagInBody(p, token);\n\n            else if (tn === $.SMALL)\n                callAdoptionAgency(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 6:\n            if (tn === $.CENTER || tn === $.FIGURE || tn === $.FOOTER || tn === $.HEADER || tn === $.HGROUP)\n                addressEndTagInBody(p, token);\n\n            else if (tn === $.APPLET || tn === $.OBJECT)\n                appletEndTagInBody(p, token);\n\n            else if (tn === $.STRIKE || tn === $.STRONG)\n                callAdoptionAgency(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 7:\n            if (tn === $.ADDRESS || tn === $.ARTICLE || tn === $.DETAILS || tn === $.SECTION || tn === $.SUMMARY)\n                addressEndTagInBody(p, token);\n\n            else if (tn === $.MARQUEE)\n                appletEndTagInBody(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 8:\n            if (tn === $.FIELDSET)\n                addressEndTagInBody(p, token);\n\n            else if (tn === $.TEMPLATE)\n                endTagInHead(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        case 10:\n            if (tn === $.BLOCKQUOTE || tn === $.FIGCAPTION)\n                addressEndTagInBody(p, token);\n\n            else\n                genericEndTagInBody(p, token);\n\n            break;\n\n        default :\n            genericEndTagInBody(p, token);\n    }\n}\n\nfunction eofInBody(p, token) {\n    if (p.tmplInsertionModeStackTop > -1)\n        eofInTemplate(p, token);\n\n    else\n        p.stopped = true;\n}\n\n//12.2.5.4.8 The \"text\" insertion mode\n//------------------------------------------------------------------\nfunction endTagInText(p, token) {\n    if (token.tagName === $.SCRIPT)\n        p.pendingScript = p.openElements.current;\n\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n}\n\n\nfunction eofInText(p, token) {\n    p.openElements.pop();\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.9 The \"in table\" insertion mode\n//------------------------------------------------------------------\nfunction characterInTable(p, token) {\n    var curTn = p.openElements.currentTagName;\n\n    if (curTn === $.TABLE || curTn === $.TBODY || curTn === $.TFOOT || curTn === $.THEAD || curTn === $.TR) {\n        p.pendingCharacterTokens = [];\n        p.hasNonWhitespacePendingCharacterToken = false;\n        p.originalInsertionMode = p.insertionMode;\n        p.insertionMode = IN_TABLE_TEXT_MODE;\n        p._processToken(token);\n    }\n\n    else\n        tokenInTable(p, token);\n}\n\nfunction captionStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p.activeFormattingElements.insertMarker();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_CAPTION_MODE;\n}\n\nfunction colgroupStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n}\n\nfunction colStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.COLGROUP);\n    p.insertionMode = IN_COLUMN_GROUP_MODE;\n    p._processToken(token);\n}\n\nfunction tbodyStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertElement(token, NS.HTML);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n}\n\nfunction tdStartTagInTable(p, token) {\n    p.openElements.clearBackToTableContext();\n    p._insertFakeElement($.TBODY);\n    p.insertionMode = IN_TABLE_BODY_MODE;\n    p._processToken(token);\n}\n\nfunction tableStartTagInTable(p, token) {\n    if (p.openElements.hasInTableScope($.TABLE)) {\n        p.openElements.popUntilTagNamePopped($.TABLE);\n        p._resetInsertionMode();\n        p._processToken(token);\n    }\n}\n\nfunction inputStartTagInTable(p, token) {\n    var inputType = Tokenizer.getTokenAttr(token, ATTRS.TYPE);\n\n    if (inputType && inputType.toLowerCase() === HIDDEN_INPUT_TYPE)\n        p._appendElement(token, NS.HTML);\n\n    else\n        tokenInTable(p, token);\n}\n\nfunction formStartTagInTable(p, token) {\n    if (!p.formElement && p.openElements.tmplCount === 0) {\n        p._insertElement(token, NS.HTML);\n        p.formElement = p.openElements.current;\n        p.openElements.pop();\n    }\n}\n\nfunction startTagInTable(p, token) {\n    var tn = token.tagName;\n\n    switch (tn.length) {\n        case 2:\n            if (tn === $.TD || tn === $.TH || tn === $.TR)\n                tdStartTagInTable(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 3:\n            if (tn === $.COL)\n                colStartTagInTable(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 4:\n            if (tn === $.FORM)\n                formStartTagInTable(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 5:\n            if (tn === $.TABLE)\n                tableStartTagInTable(p, token);\n\n            else if (tn === $.STYLE)\n                startTagInHead(p, token);\n\n            else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD)\n                tbodyStartTagInTable(p, token);\n\n            else if (tn === $.INPUT)\n                inputStartTagInTable(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 6:\n            if (tn === $.SCRIPT)\n                startTagInHead(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 7:\n            if (tn === $.CAPTION)\n                captionStartTagInTable(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        case 8:\n            if (tn === $.COLGROUP)\n                colgroupStartTagInTable(p, token);\n\n            else if (tn === $.TEMPLATE)\n                startTagInHead(p, token);\n\n            else\n                tokenInTable(p, token);\n\n            break;\n\n        default:\n            tokenInTable(p, token);\n    }\n\n}\n\nfunction endTagInTable(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TABLE)) {\n            p.openElements.popUntilTagNamePopped($.TABLE);\n            p._resetInsertionMode();\n        }\n    }\n\n    else if (tn === $.TEMPLATE)\n        endTagInHead(p, token);\n\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML &&\n             tn !== $.TBODY && tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR)\n        tokenInTable(p, token);\n}\n\nfunction tokenInTable(p, token) {\n    var savedFosterParentingState = p.fosterParentingEnabled;\n\n    p.fosterParentingEnabled = true;\n    p._processTokenInBodyMode(token);\n    p.fosterParentingEnabled = savedFosterParentingState;\n}\n\n\n//12.2.5.4.10 The \"in table text\" insertion mode\n//------------------------------------------------------------------\nfunction whitespaceCharacterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n}\n\nfunction characterInTableText(p, token) {\n    p.pendingCharacterTokens.push(token);\n    p.hasNonWhitespacePendingCharacterToken = true;\n}\n\nfunction tokenInTableText(p, token) {\n    var i = 0;\n\n    if (p.hasNonWhitespacePendingCharacterToken) {\n        for (; i < p.pendingCharacterTokens.length; i++)\n            tokenInTable(p, p.pendingCharacterTokens[i]);\n    }\n\n    else {\n        for (; i < p.pendingCharacterTokens.length; i++)\n            p._insertCharacters(p.pendingCharacterTokens[i]);\n    }\n\n    p.insertionMode = p.originalInsertionMode;\n    p._processToken(token);\n}\n\n\n//12.2.5.4.11 The \"in caption\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCaption(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\n        tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else\n        startTagInBody(p, token);\n}\n\nfunction endTagInCaption(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.CAPTION)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped($.CAPTION);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_TABLE_MODE;\n\n            if (tn === $.TABLE)\n                p._processToken(token);\n        }\n    }\n\n    else if (tn !== $.BODY && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML && tn !== $.TBODY &&\n             tn !== $.TD && tn !== $.TFOOT && tn !== $.TH && tn !== $.THEAD && tn !== $.TR)\n        endTagInBody(p, token);\n}\n\n\n//12.2.5.4.12 The \"in column group\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInColumnGroup(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.COL)\n        p._appendElement(token, NS.HTML);\n\n    else if (tn === $.TEMPLATE)\n        startTagInHead(p, token);\n\n    else\n        tokenInColumnGroup(p, token);\n}\n\nfunction endTagInColumnGroup(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.COLGROUP) {\n        if (p.openElements.currentTagName === $.COLGROUP) {\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    }\n\n    else if (tn === $.TEMPLATE)\n        endTagInHead(p, token);\n\n    else if (tn !== $.COL)\n        tokenInColumnGroup(p, token);\n}\n\nfunction tokenInColumnGroup(p, token) {\n    if (p.openElements.currentTagName === $.COLGROUP) {\n        p.openElements.pop();\n        p.insertionMode = IN_TABLE_MODE;\n        p._processToken(token);\n    }\n}\n\n//12.2.5.4.13 The \"in table body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTableBody(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TR) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_ROW_MODE;\n    }\n\n    else if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableBodyContext();\n        p._insertFakeElement($.TR);\n        p.insertionMode = IN_ROW_MODE;\n        p._processToken(token);\n    }\n\n    else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP ||\n             tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else\n        startTagInTable(p, token);\n}\n\nfunction endTagInTableBody(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n        }\n    }\n\n    else if (tn === $.TABLE) {\n        if (p.openElements.hasTableBodyContextInTableScope()) {\n            p.openElements.clearBackToTableBodyContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP ||\n             tn !== $.HTML && tn !== $.TD && tn !== $.TH && tn !== $.TR)\n        endTagInTable(p, token);\n}\n\n//12.2.5.4.14 The \"in row\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInRow(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TH || tn === $.TD) {\n        p.openElements.clearBackToTableRowContext();\n        p._insertElement(token, NS.HTML);\n        p.insertionMode = IN_CELL_MODE;\n        p.activeFormattingElements.insertMarker();\n    }\n\n    else if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\n             tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else\n        startTagInTable(p, token);\n}\n\nfunction endTagInRow(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TR) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n        }\n    }\n\n    else if (tn === $.TABLE) {\n        if (p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else if (tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD) {\n        if (p.openElements.hasInTableScope(tn) || p.openElements.hasInTableScope($.TR)) {\n            p.openElements.clearBackToTableRowContext();\n            p.openElements.pop();\n            p.insertionMode = IN_TABLE_BODY_MODE;\n            p._processToken(token);\n        }\n    }\n\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP ||\n             tn !== $.HTML && tn !== $.TD && tn !== $.TH)\n        endTagInTable(p, token);\n}\n\n\n//12.2.5.4.15 The \"in cell\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInCell(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.COL || tn === $.COLGROUP || tn === $.TBODY ||\n        tn === $.TD || tn === $.TFOOT || tn === $.TH || tn === $.THEAD || tn === $.TR) {\n\n        if (p.openElements.hasInTableScope($.TD) || p.openElements.hasInTableScope($.TH)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    }\n\n    else\n        startTagInBody(p, token);\n}\n\nfunction endTagInCell(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.TD || tn === $.TH) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.generateImpliedEndTags();\n            p.openElements.popUntilTagNamePopped(tn);\n            p.activeFormattingElements.clearToLastMarker();\n            p.insertionMode = IN_ROW_MODE;\n        }\n    }\n\n    else if (tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT || tn === $.THEAD || tn === $.TR) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p._closeTableCell();\n            p._processToken(token);\n        }\n    }\n\n    else if (tn !== $.BODY && tn !== $.CAPTION && tn !== $.COL && tn !== $.COLGROUP && tn !== $.HTML)\n        endTagInBody(p, token);\n}\n\n//12.2.5.4.16 The \"in select\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelect(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION)\n            p.openElements.pop();\n\n        p._insertElement(token, NS.HTML);\n    }\n\n    else if (tn === $.OPTGROUP) {\n        if (p.openElements.currentTagName === $.OPTION)\n            p.openElements.pop();\n\n        if (p.openElements.currentTagName === $.OPTGROUP)\n            p.openElements.pop();\n\n        p._insertElement(token, NS.HTML);\n    }\n\n    else if (tn === $.INPUT || tn === $.KEYGEN || tn === $.TEXTAREA || tn === $.SELECT) {\n        if (p.openElements.hasInSelectScope($.SELECT)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n\n            if (tn !== $.SELECT)\n                p._processToken(token);\n        }\n    }\n\n    else if (tn === $.SCRIPT || tn === $.TEMPLATE)\n        startTagInHead(p, token);\n}\n\nfunction endTagInSelect(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.OPTGROUP) {\n        var prevOpenElement = p.openElements.items[p.openElements.stackTop - 1],\n            prevOpenElementTn = prevOpenElement && p.treeAdapter.getTagName(prevOpenElement);\n\n        if (p.openElements.currentTagName === $.OPTION && prevOpenElementTn === $.OPTGROUP)\n            p.openElements.pop();\n\n        if (p.openElements.currentTagName === $.OPTGROUP)\n            p.openElements.pop();\n    }\n\n    else if (tn === $.OPTION) {\n        if (p.openElements.currentTagName === $.OPTION)\n            p.openElements.pop();\n    }\n\n    else if (tn === $.SELECT && p.openElements.hasInSelectScope($.SELECT)) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n    }\n\n    else if (tn === $.TEMPLATE)\n        endTagInHead(p, token);\n}\n\n//12.2.5.4.17 The \"in select in table\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInSelectInTable(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT ||\n        tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n        p.openElements.popUntilTagNamePopped($.SELECT);\n        p._resetInsertionMode();\n        p._processToken(token);\n    }\n\n    else\n        startTagInSelect(p, token);\n}\n\nfunction endTagInSelectInTable(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.CAPTION || tn === $.TABLE || tn === $.TBODY || tn === $.TFOOT ||\n        tn === $.THEAD || tn === $.TR || tn === $.TD || tn === $.TH) {\n        if (p.openElements.hasInTableScope(tn)) {\n            p.openElements.popUntilTagNamePopped($.SELECT);\n            p._resetInsertionMode();\n            p._processToken(token);\n        }\n    }\n\n    else\n        endTagInSelect(p, token);\n}\n\n//12.2.5.4.18 The \"in template\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInTemplate(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.BASE || tn === $.BASEFONT || tn === $.BGSOUND || tn === $.LINK || tn === $.META ||\n        tn === $.NOFRAMES || tn === $.SCRIPT || tn === $.STYLE || tn === $.TEMPLATE || tn === $.TITLE)\n        startTagInHead(p, token);\n\n    else {\n        var newInsertionMode = TEMPLATE_INSERTION_MODE_SWITCH_MAP[tn] || IN_BODY_MODE;\n\n        p._popTmplInsertionMode();\n        p._pushTmplInsertionMode(newInsertionMode);\n        p.insertionMode = newInsertionMode;\n        p._processToken(token);\n    }\n}\n\nfunction endTagInTemplate(p, token) {\n    if (token.tagName === $.TEMPLATE)\n        endTagInHead(p, token);\n}\n\nfunction eofInTemplate(p, token) {\n    if (p.openElements.tmplCount > 0) {\n        p.openElements.popUntilTagNamePopped($.TEMPLATE);\n        p.activeFormattingElements.clearToLastMarker();\n        p._popTmplInsertionMode();\n        p._resetInsertionMode();\n        p._processToken(token);\n    }\n\n    else\n        p.stopped = true;\n}\n\n\n//12.2.5.4.19 The \"after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterBody(p, token) {\n    if (token.tagName === $.HTML)\n        startTagInBody(p, token);\n\n    else\n        tokenAfterBody(p, token);\n}\n\nfunction endTagAfterBody(p, token) {\n    if (token.tagName === $.HTML) {\n        if (!p.fragmentContext)\n            p.insertionMode = AFTER_AFTER_BODY_MODE;\n    }\n\n    else\n        tokenAfterBody(p, token);\n}\n\nfunction tokenAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n//12.2.5.4.20 The \"in frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagInFrameset(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.FRAMESET)\n        p._insertElement(token, NS.HTML);\n\n    else if (tn === $.FRAME)\n        p._appendElement(token, NS.HTML);\n\n    else if (tn === $.NOFRAMES)\n        startTagInHead(p, token);\n}\n\nfunction endTagInFrameset(p, token) {\n    if (token.tagName === $.FRAMESET && !p.openElements.isRootHtmlElementCurrent()) {\n        p.openElements.pop();\n\n        if (!p.fragmentContext && p.openElements.currentTagName !== $.FRAMESET)\n            p.insertionMode = AFTER_FRAMESET_MODE;\n    }\n}\n\n//12.2.5.4.21 The \"after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterFrameset(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.NOFRAMES)\n        startTagInHead(p, token);\n}\n\nfunction endTagAfterFrameset(p, token) {\n    if (token.tagName === $.HTML)\n        p.insertionMode = AFTER_AFTER_FRAMESET_MODE;\n}\n\n//12.2.5.4.22 The \"after after body\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterBody(p, token) {\n    if (token.tagName === $.HTML)\n        startTagInBody(p, token);\n\n    else\n        tokenAfterAfterBody(p, token);\n}\n\nfunction tokenAfterAfterBody(p, token) {\n    p.insertionMode = IN_BODY_MODE;\n    p._processToken(token);\n}\n\n//12.2.5.4.23 The \"after after frameset\" insertion mode\n//------------------------------------------------------------------\nfunction startTagAfterAfterFrameset(p, token) {\n    var tn = token.tagName;\n\n    if (tn === $.HTML)\n        startTagInBody(p, token);\n\n    else if (tn === $.NOFRAMES)\n        startTagInHead(p, token);\n}\n\n\n//12.2.5.5 The rules for parsing tokens in foreign content\n//------------------------------------------------------------------\nfunction nullCharacterInForeignContent(p, token) {\n    token.chars = UNICODE.REPLACEMENT_CHARACTER;\n    p._insertCharacters(token);\n}\n\nfunction characterInForeignContent(p, token) {\n    p._insertCharacters(token);\n    p.framesetOk = false;\n}\n\nfunction startTagInForeignContent(p, token) {\n    if (foreignContent.causesExit(token) && !p.fragmentContext) {\n        while (p.treeAdapter.getNamespaceURI(p.openElements.current) !== NS.HTML && !p._isIntegrationPoint(p.openElements.current))\n            p.openElements.pop();\n\n        p._processToken(token);\n    }\n\n    else {\n        var current = p._getAdjustedCurrentElement(),\n            currentNs = p.treeAdapter.getNamespaceURI(current);\n\n        if (currentNs === NS.MATHML)\n            foreignContent.adjustTokenMathMLAttrs(token);\n\n        else if (currentNs === NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n            foreignContent.adjustTokenSVGAttrs(token);\n        }\n\n        foreignContent.adjustTokenXMLAttrs(token);\n\n        if (token.selfClosing)\n            p._appendElement(token, currentNs);\n        else\n            p._insertElement(token, currentNs);\n    }\n}\n\nfunction endTagInForeignContent(p, token) {\n    for (var i = p.openElements.stackTop; i > 0; i--) {\n        var element = p.openElements.items[i];\n\n        if (p.treeAdapter.getNamespaceURI(element) === NS.HTML) {\n            p._processToken(token);\n            break;\n        }\n\n        if (p.treeAdapter.getTagName(element).toLowerCase() === token.tagName) {\n            p.openElements.popUntilElementPopped(element);\n            break;\n        }\n    }\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}