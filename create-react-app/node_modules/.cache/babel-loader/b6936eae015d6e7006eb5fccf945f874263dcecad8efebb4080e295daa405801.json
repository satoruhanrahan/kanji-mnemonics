{"ast":null,"code":"'use strict';\n\nvar Tokenizer = require('../tokenizer'),\n  foreignContent = require('../common/foreign_content'),\n  UNICODE = require('../common/unicode'),\n  HTML = require('../common/html');\n\n//Aliases\nvar $ = HTML.TAG_NAMES,\n  NS = HTML.NAMESPACES;\n\n//ParserFeedbackSimulator\n//Simulates adjustment of the Tokenizer which performed by standard parser during tree construction.\nvar ParserFeedbackSimulator = module.exports = function (tokenizer) {\n  this.tokenizer = tokenizer;\n  this.namespaceStack = [];\n  this.namespaceStackTop = -1;\n  this._enterNamespace(NS.HTML);\n};\nParserFeedbackSimulator.prototype.getNextToken = function () {\n  var token = this.tokenizer.getNextToken();\n  if (token.type === Tokenizer.START_TAG_TOKEN) this._handleStartTagToken(token);else if (token.type === Tokenizer.END_TAG_TOKEN) this._handleEndTagToken(token);else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN && this.inForeignContent) {\n    token.type = Tokenizer.CHARACTER_TOKEN;\n    token.chars = UNICODE.REPLACEMENT_CHARACTER;\n  } else if (this.skipNextNewLine) {\n    if (token.type !== Tokenizer.HIBERNATION_TOKEN) this.skipNextNewLine = false;\n    if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n      if (token.chars.length === 1) return this.getNextToken();\n      token.chars = token.chars.substr(1);\n    }\n  }\n  return token;\n};\n\n//Namespace stack mutations\nParserFeedbackSimulator.prototype._enterNamespace = function (namespace) {\n  this.namespaceStackTop++;\n  this.namespaceStack.push(namespace);\n  this.inForeignContent = namespace !== NS.HTML;\n  this.currentNamespace = namespace;\n  this.tokenizer.allowCDATA = this.inForeignContent;\n};\nParserFeedbackSimulator.prototype._leaveCurrentNamespace = function () {\n  this.namespaceStackTop--;\n  this.namespaceStack.pop();\n  this.currentNamespace = this.namespaceStack[this.namespaceStackTop];\n  this.inForeignContent = this.currentNamespace !== NS.HTML;\n  this.tokenizer.allowCDATA = this.inForeignContent;\n};\n\n//Token handlers\nParserFeedbackSimulator.prototype._ensureTokenizerMode = function (tn) {\n  if (tn === $.TEXTAREA || tn === $.TITLE) this.tokenizer.state = Tokenizer.MODE.RCDATA;else if (tn === $.PLAINTEXT) this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;else if (tn === $.SCRIPT) this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;else if (tn === $.STYLE || tn === $.IFRAME || tn === $.XMP || tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT) this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n};\nParserFeedbackSimulator.prototype._handleStartTagToken = function (token) {\n  var tn = token.tagName;\n  if (tn === $.SVG) this._enterNamespace(NS.SVG);else if (tn === $.MATH) this._enterNamespace(NS.MATHML);\n  if (this.inForeignContent) {\n    if (foreignContent.causesExit(token)) {\n      this._leaveCurrentNamespace();\n      return;\n    }\n    var currentNs = this.currentNamespace;\n    if (currentNs === NS.MATHML) foreignContent.adjustTokenMathMLAttrs(token);else if (currentNs === NS.SVG) {\n      foreignContent.adjustTokenSVGTagName(token);\n      foreignContent.adjustTokenSVGAttrs(token);\n    }\n    foreignContent.adjustTokenXMLAttrs(token);\n    tn = token.tagName;\n    if (!token.selfClosing && foreignContent.isIntegrationPoint(tn, currentNs, token.attrs)) this._enterNamespace(NS.HTML);\n  } else {\n    if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING) this.skipNextNewLine = true;else if (tn === $.IMAGE) token.tagName = $.IMG;\n    this._ensureTokenizerMode(tn);\n  }\n};\nParserFeedbackSimulator.prototype._handleEndTagToken = function (token) {\n  var tn = token.tagName;\n  if (!this.inForeignContent) {\n    var previousNs = this.namespaceStack[this.namespaceStackTop - 1];\n    if (previousNs === NS.SVG && foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn]) tn = foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn];\n\n    //NOTE: check for exit from integration point\n    if (foreignContent.isIntegrationPoint(tn, previousNs, token.attrs)) this._leaveCurrentNamespace();\n  } else if (tn === $.SVG && this.currentNamespace === NS.SVG || tn === $.MATH && this.currentNamespace === NS.MATHML) this._leaveCurrentNamespace();\n\n  // NOTE: adjust end tag name as well for consistency\n  if (this.currentNamespace === NS.SVG) foreignContent.adjustTokenSVGTagName(token);\n};","map":{"version":3,"names":["Tokenizer","require","foreignContent","UNICODE","HTML","$","TAG_NAMES","NS","NAMESPACES","ParserFeedbackSimulator","module","exports","tokenizer","namespaceStack","namespaceStackTop","_enterNamespace","prototype","getNextToken","token","type","START_TAG_TOKEN","_handleStartTagToken","END_TAG_TOKEN","_handleEndTagToken","NULL_CHARACTER_TOKEN","inForeignContent","CHARACTER_TOKEN","chars","REPLACEMENT_CHARACTER","skipNextNewLine","HIBERNATION_TOKEN","WHITESPACE_CHARACTER_TOKEN","length","substr","namespace","push","currentNamespace","allowCDATA","_leaveCurrentNamespace","pop","_ensureTokenizerMode","tn","TEXTAREA","TITLE","state","MODE","RCDATA","PLAINTEXT","SCRIPT","SCRIPT_DATA","STYLE","IFRAME","XMP","NOEMBED","NOFRAMES","NOSCRIPT","RAWTEXT","tagName","SVG","MATH","MATHML","causesExit","currentNs","adjustTokenMathMLAttrs","adjustTokenSVGTagName","adjustTokenSVGAttrs","adjustTokenXMLAttrs","selfClosing","isIntegrationPoint","attrs","PRE","LISTING","IMAGE","IMG","previousNs","SVG_TAG_NAMES_ADJUSTMENT_MAP"],"sources":["C:/Users/Sator/WebProjects/kanjiMnemonics/create-react-app/node_modules/react-render-html/node_modules/parse5/lib/sax/parser_feedback_simulator.js"],"sourcesContent":["'use strict';\n\nvar Tokenizer = require('../tokenizer'),\n    foreignContent = require('../common/foreign_content'),\n    UNICODE = require('../common/unicode'),\n    HTML = require('../common/html');\n\n\n//Aliases\nvar $ = HTML.TAG_NAMES,\n    NS = HTML.NAMESPACES;\n\n\n//ParserFeedbackSimulator\n//Simulates adjustment of the Tokenizer which performed by standard parser during tree construction.\nvar ParserFeedbackSimulator = module.exports = function (tokenizer) {\n    this.tokenizer = tokenizer;\n\n    this.namespaceStack = [];\n    this.namespaceStackTop = -1;\n    this._enterNamespace(NS.HTML);\n};\n\nParserFeedbackSimulator.prototype.getNextToken = function () {\n    var token = this.tokenizer.getNextToken();\n\n    if (token.type === Tokenizer.START_TAG_TOKEN)\n        this._handleStartTagToken(token);\n\n    else if (token.type === Tokenizer.END_TAG_TOKEN)\n        this._handleEndTagToken(token);\n\n    else if (token.type === Tokenizer.NULL_CHARACTER_TOKEN && this.inForeignContent) {\n        token.type = Tokenizer.CHARACTER_TOKEN;\n        token.chars = UNICODE.REPLACEMENT_CHARACTER;\n    }\n\n    else if (this.skipNextNewLine) {\n        if (token.type !== Tokenizer.HIBERNATION_TOKEN)\n            this.skipNextNewLine = false;\n\n        if (token.type === Tokenizer.WHITESPACE_CHARACTER_TOKEN && token.chars[0] === '\\n') {\n            if (token.chars.length === 1)\n                return this.getNextToken();\n\n            token.chars = token.chars.substr(1);\n        }\n    }\n\n    return token;\n};\n\n//Namespace stack mutations\nParserFeedbackSimulator.prototype._enterNamespace = function (namespace) {\n    this.namespaceStackTop++;\n    this.namespaceStack.push(namespace);\n\n    this.inForeignContent = namespace !== NS.HTML;\n    this.currentNamespace = namespace;\n    this.tokenizer.allowCDATA = this.inForeignContent;\n};\n\nParserFeedbackSimulator.prototype._leaveCurrentNamespace = function () {\n    this.namespaceStackTop--;\n    this.namespaceStack.pop();\n\n    this.currentNamespace = this.namespaceStack[this.namespaceStackTop];\n    this.inForeignContent = this.currentNamespace !== NS.HTML;\n    this.tokenizer.allowCDATA = this.inForeignContent;\n};\n\n//Token handlers\nParserFeedbackSimulator.prototype._ensureTokenizerMode = function (tn) {\n    if (tn === $.TEXTAREA || tn === $.TITLE)\n        this.tokenizer.state = Tokenizer.MODE.RCDATA;\n\n    else if (tn === $.PLAINTEXT)\n        this.tokenizer.state = Tokenizer.MODE.PLAINTEXT;\n\n    else if (tn === $.SCRIPT)\n        this.tokenizer.state = Tokenizer.MODE.SCRIPT_DATA;\n\n    else if (tn === $.STYLE || tn === $.IFRAME || tn === $.XMP ||\n             tn === $.NOEMBED || tn === $.NOFRAMES || tn === $.NOSCRIPT)\n        this.tokenizer.state = Tokenizer.MODE.RAWTEXT;\n};\n\nParserFeedbackSimulator.prototype._handleStartTagToken = function (token) {\n    var tn = token.tagName;\n\n    if (tn === $.SVG)\n        this._enterNamespace(NS.SVG);\n\n    else if (tn === $.MATH)\n        this._enterNamespace(NS.MATHML);\n\n    if (this.inForeignContent) {\n        if (foreignContent.causesExit(token)) {\n            this._leaveCurrentNamespace();\n            return;\n        }\n\n        var currentNs = this.currentNamespace;\n\n        if (currentNs === NS.MATHML)\n            foreignContent.adjustTokenMathMLAttrs(token);\n\n        else if (currentNs === NS.SVG) {\n            foreignContent.adjustTokenSVGTagName(token);\n            foreignContent.adjustTokenSVGAttrs(token);\n        }\n\n        foreignContent.adjustTokenXMLAttrs(token);\n\n        tn = token.tagName;\n\n        if (!token.selfClosing && foreignContent.isIntegrationPoint(tn, currentNs, token.attrs))\n            this._enterNamespace(NS.HTML);\n    }\n\n    else {\n        if (tn === $.PRE || tn === $.TEXTAREA || tn === $.LISTING)\n            this.skipNextNewLine = true;\n\n        else if (tn === $.IMAGE)\n            token.tagName = $.IMG;\n\n        this._ensureTokenizerMode(tn);\n    }\n};\n\nParserFeedbackSimulator.prototype._handleEndTagToken = function (token) {\n    var tn = token.tagName;\n\n    if (!this.inForeignContent) {\n        var previousNs = this.namespaceStack[this.namespaceStackTop - 1];\n\n        if (previousNs === NS.SVG && foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn])\n            tn = foreignContent.SVG_TAG_NAMES_ADJUSTMENT_MAP[tn];\n\n        //NOTE: check for exit from integration point\n        if (foreignContent.isIntegrationPoint(tn, previousNs, token.attrs))\n            this._leaveCurrentNamespace();\n    }\n\n    else if (tn === $.SVG && this.currentNamespace === NS.SVG ||\n             tn === $.MATH && this.currentNamespace === NS.MATHML)\n        this._leaveCurrentNamespace();\n\n    // NOTE: adjust end tag name as well for consistency\n    if (this.currentNamespace === NS.SVG)\n        foreignContent.adjustTokenSVGTagName(token);\n};\n"],"mappings":"AAAA,YAAY;;AAEZ,IAAIA,SAAS,GAAGC,OAAO,CAAC,cAAc,CAAC;EACnCC,cAAc,GAAGD,OAAO,CAAC,2BAA2B,CAAC;EACrDE,OAAO,GAAGF,OAAO,CAAC,mBAAmB,CAAC;EACtCG,IAAI,GAAGH,OAAO,CAAC,gBAAgB,CAAC;;AAGpC;AACA,IAAII,CAAC,GAAGD,IAAI,CAACE,SAAS;EAClBC,EAAE,GAAGH,IAAI,CAACI,UAAU;;AAGxB;AACA;AACA,IAAIC,uBAAuB,GAAGC,MAAM,CAACC,OAAO,GAAG,UAAUC,SAAS,EAAE;EAChE,IAAI,CAACA,SAAS,GAAGA,SAAS;EAE1B,IAAI,CAACC,cAAc,GAAG,EAAE;EACxB,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;EAC3B,IAAI,CAACC,eAAe,CAACR,EAAE,CAACH,IAAI,CAAC;AACjC,CAAC;AAEDK,uBAAuB,CAACO,SAAS,CAACC,YAAY,GAAG,YAAY;EACzD,IAAIC,KAAK,GAAG,IAAI,CAACN,SAAS,CAACK,YAAY,CAAC,CAAC;EAEzC,IAAIC,KAAK,CAACC,IAAI,KAAKnB,SAAS,CAACoB,eAAe,EACxC,IAAI,CAACC,oBAAoB,CAACH,KAAK,CAAC,CAAC,KAEhC,IAAIA,KAAK,CAACC,IAAI,KAAKnB,SAAS,CAACsB,aAAa,EAC3C,IAAI,CAACC,kBAAkB,CAACL,KAAK,CAAC,CAAC,KAE9B,IAAIA,KAAK,CAACC,IAAI,KAAKnB,SAAS,CAACwB,oBAAoB,IAAI,IAAI,CAACC,gBAAgB,EAAE;IAC7EP,KAAK,CAACC,IAAI,GAAGnB,SAAS,CAAC0B,eAAe;IACtCR,KAAK,CAACS,KAAK,GAAGxB,OAAO,CAACyB,qBAAqB;EAC/C,CAAC,MAEI,IAAI,IAAI,CAACC,eAAe,EAAE;IAC3B,IAAIX,KAAK,CAACC,IAAI,KAAKnB,SAAS,CAAC8B,iBAAiB,EAC1C,IAAI,CAACD,eAAe,GAAG,KAAK;IAEhC,IAAIX,KAAK,CAACC,IAAI,KAAKnB,SAAS,CAAC+B,0BAA0B,IAAIb,KAAK,CAACS,KAAK,CAAC,CAAC,CAAC,KAAK,IAAI,EAAE;MAChF,IAAIT,KAAK,CAACS,KAAK,CAACK,MAAM,KAAK,CAAC,EACxB,OAAO,IAAI,CAACf,YAAY,CAAC,CAAC;MAE9BC,KAAK,CAACS,KAAK,GAAGT,KAAK,CAACS,KAAK,CAACM,MAAM,CAAC,CAAC,CAAC;IACvC;EACJ;EAEA,OAAOf,KAAK;AAChB,CAAC;;AAED;AACAT,uBAAuB,CAACO,SAAS,CAACD,eAAe,GAAG,UAAUmB,SAAS,EAAE;EACrE,IAAI,CAACpB,iBAAiB,EAAE;EACxB,IAAI,CAACD,cAAc,CAACsB,IAAI,CAACD,SAAS,CAAC;EAEnC,IAAI,CAACT,gBAAgB,GAAGS,SAAS,KAAK3B,EAAE,CAACH,IAAI;EAC7C,IAAI,CAACgC,gBAAgB,GAAGF,SAAS;EACjC,IAAI,CAACtB,SAAS,CAACyB,UAAU,GAAG,IAAI,CAACZ,gBAAgB;AACrD,CAAC;AAEDhB,uBAAuB,CAACO,SAAS,CAACsB,sBAAsB,GAAG,YAAY;EACnE,IAAI,CAACxB,iBAAiB,EAAE;EACxB,IAAI,CAACD,cAAc,CAAC0B,GAAG,CAAC,CAAC;EAEzB,IAAI,CAACH,gBAAgB,GAAG,IAAI,CAACvB,cAAc,CAAC,IAAI,CAACC,iBAAiB,CAAC;EACnE,IAAI,CAACW,gBAAgB,GAAG,IAAI,CAACW,gBAAgB,KAAK7B,EAAE,CAACH,IAAI;EACzD,IAAI,CAACQ,SAAS,CAACyB,UAAU,GAAG,IAAI,CAACZ,gBAAgB;AACrD,CAAC;;AAED;AACAhB,uBAAuB,CAACO,SAAS,CAACwB,oBAAoB,GAAG,UAAUC,EAAE,EAAE;EACnE,IAAIA,EAAE,KAAKpC,CAAC,CAACqC,QAAQ,IAAID,EAAE,KAAKpC,CAAC,CAACsC,KAAK,EACnC,IAAI,CAAC/B,SAAS,CAACgC,KAAK,GAAG5C,SAAS,CAAC6C,IAAI,CAACC,MAAM,CAAC,KAE5C,IAAIL,EAAE,KAAKpC,CAAC,CAAC0C,SAAS,EACvB,IAAI,CAACnC,SAAS,CAACgC,KAAK,GAAG5C,SAAS,CAAC6C,IAAI,CAACE,SAAS,CAAC,KAE/C,IAAIN,EAAE,KAAKpC,CAAC,CAAC2C,MAAM,EACpB,IAAI,CAACpC,SAAS,CAACgC,KAAK,GAAG5C,SAAS,CAAC6C,IAAI,CAACI,WAAW,CAAC,KAEjD,IAAIR,EAAE,KAAKpC,CAAC,CAAC6C,KAAK,IAAIT,EAAE,KAAKpC,CAAC,CAAC8C,MAAM,IAAIV,EAAE,KAAKpC,CAAC,CAAC+C,GAAG,IACjDX,EAAE,KAAKpC,CAAC,CAACgD,OAAO,IAAIZ,EAAE,KAAKpC,CAAC,CAACiD,QAAQ,IAAIb,EAAE,KAAKpC,CAAC,CAACkD,QAAQ,EAC/D,IAAI,CAAC3C,SAAS,CAACgC,KAAK,GAAG5C,SAAS,CAAC6C,IAAI,CAACW,OAAO;AACrD,CAAC;AAED/C,uBAAuB,CAACO,SAAS,CAACK,oBAAoB,GAAG,UAAUH,KAAK,EAAE;EACtE,IAAIuB,EAAE,GAAGvB,KAAK,CAACuC,OAAO;EAEtB,IAAIhB,EAAE,KAAKpC,CAAC,CAACqD,GAAG,EACZ,IAAI,CAAC3C,eAAe,CAACR,EAAE,CAACmD,GAAG,CAAC,CAAC,KAE5B,IAAIjB,EAAE,KAAKpC,CAAC,CAACsD,IAAI,EAClB,IAAI,CAAC5C,eAAe,CAACR,EAAE,CAACqD,MAAM,CAAC;EAEnC,IAAI,IAAI,CAACnC,gBAAgB,EAAE;IACvB,IAAIvB,cAAc,CAAC2D,UAAU,CAAC3C,KAAK,CAAC,EAAE;MAClC,IAAI,CAACoB,sBAAsB,CAAC,CAAC;MAC7B;IACJ;IAEA,IAAIwB,SAAS,GAAG,IAAI,CAAC1B,gBAAgB;IAErC,IAAI0B,SAAS,KAAKvD,EAAE,CAACqD,MAAM,EACvB1D,cAAc,CAAC6D,sBAAsB,CAAC7C,KAAK,CAAC,CAAC,KAE5C,IAAI4C,SAAS,KAAKvD,EAAE,CAACmD,GAAG,EAAE;MAC3BxD,cAAc,CAAC8D,qBAAqB,CAAC9C,KAAK,CAAC;MAC3ChB,cAAc,CAAC+D,mBAAmB,CAAC/C,KAAK,CAAC;IAC7C;IAEAhB,cAAc,CAACgE,mBAAmB,CAAChD,KAAK,CAAC;IAEzCuB,EAAE,GAAGvB,KAAK,CAACuC,OAAO;IAElB,IAAI,CAACvC,KAAK,CAACiD,WAAW,IAAIjE,cAAc,CAACkE,kBAAkB,CAAC3B,EAAE,EAAEqB,SAAS,EAAE5C,KAAK,CAACmD,KAAK,CAAC,EACnF,IAAI,CAACtD,eAAe,CAACR,EAAE,CAACH,IAAI,CAAC;EACrC,CAAC,MAEI;IACD,IAAIqC,EAAE,KAAKpC,CAAC,CAACiE,GAAG,IAAI7B,EAAE,KAAKpC,CAAC,CAACqC,QAAQ,IAAID,EAAE,KAAKpC,CAAC,CAACkE,OAAO,EACrD,IAAI,CAAC1C,eAAe,GAAG,IAAI,CAAC,KAE3B,IAAIY,EAAE,KAAKpC,CAAC,CAACmE,KAAK,EACnBtD,KAAK,CAACuC,OAAO,GAAGpD,CAAC,CAACoE,GAAG;IAEzB,IAAI,CAACjC,oBAAoB,CAACC,EAAE,CAAC;EACjC;AACJ,CAAC;AAEDhC,uBAAuB,CAACO,SAAS,CAACO,kBAAkB,GAAG,UAAUL,KAAK,EAAE;EACpE,IAAIuB,EAAE,GAAGvB,KAAK,CAACuC,OAAO;EAEtB,IAAI,CAAC,IAAI,CAAChC,gBAAgB,EAAE;IACxB,IAAIiD,UAAU,GAAG,IAAI,CAAC7D,cAAc,CAAC,IAAI,CAACC,iBAAiB,GAAG,CAAC,CAAC;IAEhE,IAAI4D,UAAU,KAAKnE,EAAE,CAACmD,GAAG,IAAIxD,cAAc,CAACyE,4BAA4B,CAAClC,EAAE,CAAC,EACxEA,EAAE,GAAGvC,cAAc,CAACyE,4BAA4B,CAAClC,EAAE,CAAC;;IAExD;IACA,IAAIvC,cAAc,CAACkE,kBAAkB,CAAC3B,EAAE,EAAEiC,UAAU,EAAExD,KAAK,CAACmD,KAAK,CAAC,EAC9D,IAAI,CAAC/B,sBAAsB,CAAC,CAAC;EACrC,CAAC,MAEI,IAAIG,EAAE,KAAKpC,CAAC,CAACqD,GAAG,IAAI,IAAI,CAACtB,gBAAgB,KAAK7B,EAAE,CAACmD,GAAG,IAChDjB,EAAE,KAAKpC,CAAC,CAACsD,IAAI,IAAI,IAAI,CAACvB,gBAAgB,KAAK7B,EAAE,CAACqD,MAAM,EACzD,IAAI,CAACtB,sBAAsB,CAAC,CAAC;;EAEjC;EACA,IAAI,IAAI,CAACF,gBAAgB,KAAK7B,EAAE,CAACmD,GAAG,EAChCxD,cAAc,CAAC8D,qBAAqB,CAAC9C,KAAK,CAAC;AACnD,CAAC"},"metadata":{},"sourceType":"script","externalDependencies":[]}