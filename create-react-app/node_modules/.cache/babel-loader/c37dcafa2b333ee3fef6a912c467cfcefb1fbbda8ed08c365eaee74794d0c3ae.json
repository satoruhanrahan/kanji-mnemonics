{"ast":null,"code":"'use strict';\n\n//Const\nvar NOAH_ARK_CAPACITY = 3;\n\n//List of formatting elements\nvar FormattingElementList = module.exports = function (treeAdapter) {\n  this.length = 0;\n  this.entries = [];\n  this.treeAdapter = treeAdapter;\n  this.bookmark = null;\n};\n\n//Entry types\nFormattingElementList.MARKER_ENTRY = 'MARKER_ENTRY';\nFormattingElementList.ELEMENT_ENTRY = 'ELEMENT_ENTRY';\n\n//Noah Ark's condition\n//OPTIMIZATION: at first we try to find possible candidates for exclusion using\n//lightweight heuristics without thorough attributes check.\nFormattingElementList.prototype._getNoahArkConditionCandidates = function (newElement) {\n  var candidates = [];\n  if (this.length >= NOAH_ARK_CAPACITY) {\n    var neAttrsLength = this.treeAdapter.getAttrList(newElement).length,\n      neTagName = this.treeAdapter.getTagName(newElement),\n      neNamespaceURI = this.treeAdapter.getNamespaceURI(newElement);\n    for (var i = this.length - 1; i >= 0; i--) {\n      var entry = this.entries[i];\n      if (entry.type === FormattingElementList.MARKER_ENTRY) break;\n      var element = entry.element,\n        elementAttrs = this.treeAdapter.getAttrList(element),\n        isCandidate = this.treeAdapter.getTagName(element) === neTagName && this.treeAdapter.getNamespaceURI(element) === neNamespaceURI && elementAttrs.length === neAttrsLength;\n      if (isCandidate) candidates.push({\n        idx: i,\n        attrs: elementAttrs\n      });\n    }\n  }\n  return candidates.length < NOAH_ARK_CAPACITY ? [] : candidates;\n};\nFormattingElementList.prototype._ensureNoahArkCondition = function (newElement) {\n  var candidates = this._getNoahArkConditionCandidates(newElement),\n    cLength = candidates.length;\n  if (cLength) {\n    var neAttrs = this.treeAdapter.getAttrList(newElement),\n      neAttrsLength = neAttrs.length,\n      neAttrsMap = Object.create(null);\n\n    //NOTE: build attrs map for the new element so we can perform fast lookups\n    for (var i = 0; i < neAttrsLength; i++) {\n      var neAttr = neAttrs[i];\n      neAttrsMap[neAttr.name] = neAttr.value;\n    }\n    for (i = 0; i < neAttrsLength; i++) {\n      for (var j = 0; j < cLength; j++) {\n        var cAttr = candidates[j].attrs[i];\n        if (neAttrsMap[cAttr.name] !== cAttr.value) {\n          candidates.splice(j, 1);\n          cLength--;\n        }\n        if (candidates.length < NOAH_ARK_CAPACITY) return;\n      }\n    }\n\n    //NOTE: remove bottommost candidates until Noah's Ark condition will not be met\n    for (i = cLength - 1; i >= NOAH_ARK_CAPACITY - 1; i--) {\n      this.entries.splice(candidates[i].idx, 1);\n      this.length--;\n    }\n  }\n};\n\n//Mutations\nFormattingElementList.prototype.insertMarker = function () {\n  this.entries.push({\n    type: FormattingElementList.MARKER_ENTRY\n  });\n  this.length++;\n};\nFormattingElementList.prototype.pushElement = function (element, token) {\n  this._ensureNoahArkCondition(element);\n  this.entries.push({\n    type: FormattingElementList.ELEMENT_ENTRY,\n    element: element,\n    token: token\n  });\n  this.length++;\n};\nFormattingElementList.prototype.insertElementAfterBookmark = function (element, token) {\n  var bookmarkIdx = this.length - 1;\n  for (; bookmarkIdx >= 0; bookmarkIdx--) {\n    if (this.entries[bookmarkIdx] === this.bookmark) break;\n  }\n  this.entries.splice(bookmarkIdx + 1, 0, {\n    type: FormattingElementList.ELEMENT_ENTRY,\n    element: element,\n    token: token\n  });\n  this.length++;\n};\nFormattingElementList.prototype.removeEntry = function (entry) {\n  for (var i = this.length - 1; i >= 0; i--) {\n    if (this.entries[i] === entry) {\n      this.entries.splice(i, 1);\n      this.length--;\n      break;\n    }\n  }\n};\nFormattingElementList.prototype.clearToLastMarker = function () {\n  while (this.length) {\n    var entry = this.entries.pop();\n    this.length--;\n    if (entry.type === FormattingElementList.MARKER_ENTRY) break;\n  }\n};\n\n//Search\nFormattingElementList.prototype.getElementEntryInScopeWithTagName = function (tagName) {\n  for (var i = this.length - 1; i >= 0; i--) {\n    var entry = this.entries[i];\n    if (entry.type === FormattingElementList.MARKER_ENTRY) return null;\n    if (this.treeAdapter.getTagName(entry.element) === tagName) return entry;\n  }\n  return null;\n};\nFormattingElementList.prototype.getElementEntry = function (element) {\n  for (var i = this.length - 1; i >= 0; i--) {\n    var entry = this.entries[i];\n    if (entry.type === FormattingElementList.ELEMENT_ENTRY && entry.element === element) return entry;\n  }\n  return null;\n};","map":{"version":3,"names":["NOAH_ARK_CAPACITY","FormattingElementList","module","exports","treeAdapter","length","entries","bookmark","MARKER_ENTRY","ELEMENT_ENTRY","prototype","_getNoahArkConditionCandidates","newElement","candidates","neAttrsLength","getAttrList","neTagName","getTagName","neNamespaceURI","getNamespaceURI","i","entry","type","element","elementAttrs","isCandidate","push","idx","attrs","_ensureNoahArkCondition","cLength","neAttrs","neAttrsMap","Object","create","neAttr","name","value","j","cAttr","splice","insertMarker","pushElement","token","insertElementAfterBookmark","bookmarkIdx","removeEntry","clearToLastMarker","pop","getElementEntryInScopeWithTagName","tagName","getElementEntry"],"sources":["C:/Users/Sator/WebProjects/kanjiMnemonics/create-react-app/node_modules/react-render-html/node_modules/parse5/lib/parser/formatting_element_list.js"],"sourcesContent":["'use strict';\n\n//Const\nvar NOAH_ARK_CAPACITY = 3;\n\n//List of formatting elements\nvar FormattingElementList = module.exports = function (treeAdapter) {\n    this.length = 0;\n    this.entries = [];\n    this.treeAdapter = treeAdapter;\n    this.bookmark = null;\n};\n\n//Entry types\nFormattingElementList.MARKER_ENTRY = 'MARKER_ENTRY';\nFormattingElementList.ELEMENT_ENTRY = 'ELEMENT_ENTRY';\n\n//Noah Ark's condition\n//OPTIMIZATION: at first we try to find possible candidates for exclusion using\n//lightweight heuristics without thorough attributes check.\nFormattingElementList.prototype._getNoahArkConditionCandidates = function (newElement) {\n    var candidates = [];\n\n    if (this.length >= NOAH_ARK_CAPACITY) {\n        var neAttrsLength = this.treeAdapter.getAttrList(newElement).length,\n            neTagName = this.treeAdapter.getTagName(newElement),\n            neNamespaceURI = this.treeAdapter.getNamespaceURI(newElement);\n\n        for (var i = this.length - 1; i >= 0; i--) {\n            var entry = this.entries[i];\n\n            if (entry.type === FormattingElementList.MARKER_ENTRY)\n                break;\n\n            var element = entry.element,\n                elementAttrs = this.treeAdapter.getAttrList(element),\n                isCandidate = this.treeAdapter.getTagName(element) === neTagName &&\n                              this.treeAdapter.getNamespaceURI(element) === neNamespaceURI &&\n                              elementAttrs.length === neAttrsLength;\n\n            if (isCandidate)\n                candidates.push({idx: i, attrs: elementAttrs});\n        }\n    }\n\n    return candidates.length < NOAH_ARK_CAPACITY ? [] : candidates;\n};\n\nFormattingElementList.prototype._ensureNoahArkCondition = function (newElement) {\n    var candidates = this._getNoahArkConditionCandidates(newElement),\n        cLength = candidates.length;\n\n    if (cLength) {\n        var neAttrs = this.treeAdapter.getAttrList(newElement),\n            neAttrsLength = neAttrs.length,\n            neAttrsMap = Object.create(null);\n\n        //NOTE: build attrs map for the new element so we can perform fast lookups\n        for (var i = 0; i < neAttrsLength; i++) {\n            var neAttr = neAttrs[i];\n\n            neAttrsMap[neAttr.name] = neAttr.value;\n        }\n\n        for (i = 0; i < neAttrsLength; i++) {\n            for (var j = 0; j < cLength; j++) {\n                var cAttr = candidates[j].attrs[i];\n\n                if (neAttrsMap[cAttr.name] !== cAttr.value) {\n                    candidates.splice(j, 1);\n                    cLength--;\n                }\n\n                if (candidates.length < NOAH_ARK_CAPACITY)\n                    return;\n            }\n        }\n\n        //NOTE: remove bottommost candidates until Noah's Ark condition will not be met\n        for (i = cLength - 1; i >= NOAH_ARK_CAPACITY - 1; i--) {\n            this.entries.splice(candidates[i].idx, 1);\n            this.length--;\n        }\n    }\n};\n\n//Mutations\nFormattingElementList.prototype.insertMarker = function () {\n    this.entries.push({type: FormattingElementList.MARKER_ENTRY});\n    this.length++;\n};\n\nFormattingElementList.prototype.pushElement = function (element, token) {\n    this._ensureNoahArkCondition(element);\n\n    this.entries.push({\n        type: FormattingElementList.ELEMENT_ENTRY,\n        element: element,\n        token: token\n    });\n\n    this.length++;\n};\n\nFormattingElementList.prototype.insertElementAfterBookmark = function (element, token) {\n    var bookmarkIdx = this.length - 1;\n\n    for (; bookmarkIdx >= 0; bookmarkIdx--) {\n        if (this.entries[bookmarkIdx] === this.bookmark)\n            break;\n    }\n\n    this.entries.splice(bookmarkIdx + 1, 0, {\n        type: FormattingElementList.ELEMENT_ENTRY,\n        element: element,\n        token: token\n    });\n\n    this.length++;\n};\n\nFormattingElementList.prototype.removeEntry = function (entry) {\n    for (var i = this.length - 1; i >= 0; i--) {\n        if (this.entries[i] === entry) {\n            this.entries.splice(i, 1);\n            this.length--;\n            break;\n        }\n    }\n};\n\nFormattingElementList.prototype.clearToLastMarker = function () {\n    while (this.length) {\n        var entry = this.entries.pop();\n\n        this.length--;\n\n        if (entry.type === FormattingElementList.MARKER_ENTRY)\n            break;\n    }\n};\n\n//Search\nFormattingElementList.prototype.getElementEntryInScopeWithTagName = function (tagName) {\n    for (var i = this.length - 1; i >= 0; i--) {\n        var entry = this.entries[i];\n\n        if (entry.type === FormattingElementList.MARKER_ENTRY)\n            return null;\n\n        if (this.treeAdapter.getTagName(entry.element) === tagName)\n            return entry;\n    }\n\n    return null;\n};\n\nFormattingElementList.prototype.getElementEntry = function (element) {\n    for (var i = this.length - 1; i >= 0; i--) {\n        var entry = this.entries[i];\n\n        if (entry.type === FormattingElementList.ELEMENT_ENTRY && entry.element === element)\n            return entry;\n    }\n\n    return null;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"script","externalDependencies":[]}